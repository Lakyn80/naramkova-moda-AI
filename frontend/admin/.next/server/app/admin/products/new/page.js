(()=>{var e={};e.id=573,e.ids=[573],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6197:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d}),r(8917),r(596),r(1506),r(5866);var a=r(3191),s=r(8716),i=r(7922),n=r.n(i),o=r(5231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d=["",{children:["admin",{children:["products",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,8917)),"C:\\Users\\lukas\\Desktop\\PYTHON_PROJECTS_DESKTOP\\PYTHON_PROJECTS\\nmm_docker\\naramkovamoda-v2\\frontend\\admin\\app\\admin\\products\\new\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,596)),"C:\\Users\\lukas\\Desktop\\PYTHON_PROJECTS_DESKTOP\\PYTHON_PROJECTS\\nmm_docker\\naramkovamoda-v2\\frontend\\admin\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,1506)),"C:\\Users\\lukas\\Desktop\\PYTHON_PROJECTS_DESKTOP\\PYTHON_PROJECTS\\nmm_docker\\naramkovamoda-v2\\frontend\\admin\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\lukas\\Desktop\\PYTHON_PROJECTS_DESKTOP\\PYTHON_PROJECTS\\nmm_docker\\naramkovamoda-v2\\frontend\\admin\\app\\admin\\products\\new\\page.tsx"],m="/admin/products/new/page",p={require:r,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/admin/products/new/page",pathname:"/admin/products/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9960:(e,t,r)=>{Promise.resolve().then(r.bind(r,2802))},6253:(e,t,r)=>{Promise.resolve().then(r.bind(r,4559))},6686:()=>{},2573:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},2802:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var a=r(326),s=r(434),i=r(5047),n=r(7577),o=r(6824);let l=[{href:"/admin/products",label:"\uD83D\uDCE6 Produkty"},{href:"/admin/categories",label:"\uD83D\uDCC2 Kategorie"},{href:"/admin/sold",label:"\uD83D\uDCCA Prodan\xe9"},{href:"/admin/payments",label:"\uD83D\uDCB3 Platby"},{href:"/admin/media",label:"\uD83D\uDDBC️ M\xe9dia"}];function d({children:e}){let t=(0,i.usePathname)(),r=(0,i.useRouter)(),[d,c]=(0,n.useState)(null),m=t.startsWith("/admin/login")||t.startsWith("/admin/forgot")||t.startsWith("/admin/reset"),p=async()=>{c(null);try{if(!(await fetch((0,o.f8)("/api/auth/logout"),{method:"POST"})).ok)throw Error("Odhl\xe1šen\xed se nezdařilo.");r.push("/admin/login")}catch(e){c(e instanceof Error?e.message:"Odhl\xe1šen\xed se nezdařilo.")}};return m?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-600 via-blue-600 to-sky-500 text-gray-900",children:e}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 text-gray-900",children:[a.jsx("header",{className:"fixed inset-x-0 top-0 z-30 bg-gradient-to-br from-slate-900 via-slate-800 to-blue-900 text-white shadow",children:(0,a.jsxs)("div",{className:"mx-auto flex max-w-6xl flex-wrap items-center justify-between gap-4 px-6 py-3",children:[(0,a.jsxs)(s.default,{href:"/admin",className:"flex items-center gap-3 text-lg font-semibold",children:[a.jsx("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-full bg-white/10",children:"NM"}),a.jsx("span",{children:"Admin"})]}),(0,a.jsxs)("nav",{className:"flex flex-wrap items-center gap-4 text-sm text-white/90",children:[l.map(e=>a.jsx(s.default,{href:e.href,className:"hover:text-white",children:e.label},e.href)),a.jsx("button",{type:"button",onClick:p,className:"rounded-full border border-white/30 px-3 py-1 text-sm hover:border-white/70 hover:text-white",children:"\uD83D\uDEAA Odhl\xe1sit"})]})]})}),a.jsx("main",{className:"mx-auto max-w-6xl px-6 pb-8 pt-24",children:e}),d&&a.jsx("div",{className:"fixed right-6 top-24 z-40 rounded-lg bg-red-600 px-4 py-3 text-sm text-white shadow-lg",children:d})]})}},4559:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var a=r(326),s=r(7577),i=r(5047),n=r(6824);function o(){let e=(0,i.useRouter)(),[t,r]=(0,s.useState)([]),[o,l]=(0,s.useState)(!0),[d,c]=(0,s.useState)(!1),[m,p]=(0,s.useState)(null),[u,h]=(0,s.useState)(null),[x,g]=(0,s.useState)(!1),[y,b]=(0,s.useState)(null),[f,v]=(0,s.useState)(!1),[j,k]=(0,s.useState)(!1),[w,N]=(0,s.useState)(!1),[_,S]=(0,s.useState)(!1),[P,E]=(0,s.useState)(!1),[C,O]=(0,s.useState)(!1),[T,z]=(0,s.useState)({name:"",description:"",price_czk:"",stock:"1",category_id:"",wrist_size:"",image:null}),[$,D]=(0,s.useState)([]),[A,R]=(0,s.useState)([]),[J,I]=(0,s.useState)(null),[G,Y]=(0,s.useState)([]),H=(0,s.useMemo)(()=>t.map(e=>({id:e.id,label:`${e.group||"—"} — ${e.name}`})),[t]),q=e=>{let{name:t,value:r}=e.target;z(e=>({...e,[t]:r}))},U=e=>{R(t=>t.filter((t,r)=>r!==e))},K=(e,t)=>{R(r=>r.map((r,a)=>a===e?{...r,...t}:r))},F=async t=>{t.preventDefault(),c(!0),p(null),h(null);try{let t=new FormData;t.append("name",T.name),t.append("description",T.description),t.append("price_czk",T.price_czk),t.append("stock",T.stock),t.append("category_id",T.category_id),t.append("wrist_size",T.wrist_size),T.image&&t.append("image",T.image),$.forEach(e=>t.append("media",e)),A.forEach((e,r)=>{t.append("variant_name[]",e.variant_name||""),t.append("variant_wrist_size[]",e.wrist_size||""),t.append("variant_stock[]",String(e.stock??0)),t.append("variant_price[]",void 0!==e.price_czk&&null!==e.price_czk?String(e.price_czk):""),t.append("variant_description[]",e.description||""),e.imageFile?t.append("variant_image[]",e.imageFile):t.append("variant_image[]",new Blob([]),""),(e.extraFiles||[]).forEach(e=>{t.append(`variant_image_multi_${r}[]`,e)})}),await (0,n.ry)(t),h("Produkt byl vytvořen."),e.push("/admin/products?created=1")}catch(e){p(e instanceof Error?e.message:"Nepodařilo se vytvořit produkt")}finally{c(!1)}},M=e=>{let t=e.labels||[],r=e.objects||[],a=e.dominant_colors||e.dominantColors||e.colors||[];return[t.length?`labels: ${t.join(", ")}`:"",a.length?`dominant colors: ${a.join(", ")}`:"",r.length?`objects: ${r.join(", ")}`:""].filter(Boolean).join("\n")},V=e=>{if(!e.length)return"";let r=e.map(e=>e.toLowerCase()),a=t.find(e=>{let t=(e.name||"").toLowerCase(),a=(e.slug||"").toLowerCase();return r.some(e=>t.includes(e)||a.includes(e))});return a?.name||""},B=e=>{let t=[];return t.push("You are generating product data for a handmade shop."),t.push("Return JSON only with keys: name, description, category_slug, price_czk, stock."),t.push("Do not include extra keys or any commentary."),e.productName&&t.push(`Product name hint: ${e.productName}`),t.push("Image attributes:"),t.push(e.visionText||"No attributes provided."),e.ragExamples&&(t.push("Similar examples (if any):"),t.push(JSON.stringify(e.ragExamples))),t.push("Formatting rules:"),t.push("- description: single plain text, keep tone similar to existing products"),t.push("- category_slug: lowercase slug"),t.push("- price_czk: number"),t.push("- stock: integer"),t.join("\n")},L=e=>{try{return JSON.parse(e)}catch{let t=e.indexOf("{"),r=e.lastIndexOf("}");if(t>=0&&r>t)try{return JSON.parse(e.slice(t,r+1))}catch{}return null}},W=async()=>{if(!T.image){b("Vyberte obr\xe1zek produktu.");return}b(null),g(!0);try{let e=new FormData;e.append("image",T.image);let r=await (0,n.RA)(e),a=M(r),s=await (0,n.TE)(a),i=s.long_description||s.description||s.text||s.short_description||"";if(!i)throw Error("AI nevygenerovala popis.");z(e=>({...e,description:i}));let o=r.labels||[],l=r.objects||[],d=r.dominant_colors||r.dominantColors||r.colors||[],c=t.find(e=>String(e.id)===String(T.category_id))?.name||"";(0,n.Dj)({category:c,attributes:{labels:o,colors:d,objects:l},description:i}).catch(e=>{console.error("RAG ingest failed:",e)})}catch(e){b(e instanceof Error?e.message:"AI generov\xe1n\xed selhalo.")}finally{g(!1)}},Z=async()=>{if(!T.image){b("Vyberte obr\xe1zek produktu.");return}b(null),v(!0);try{let e=new FormData;e.append("image",T.image);let r=await (0,n.RA)(e),a=r.labels||[],s=r.objects||[],i=r.dominant_colors||r.dominantColors||r.colors||[],o=V(a),l=null;try{l=await (0,n.zm)({category:o,attributes:{labels:a,colors:i,objects:s}})}catch(e){console.error("RAG search failed:",e)}let d=M({labels:a,colors:i,dominant_colors:i,objects:s}),c=B({visionText:d,productName:T.name||void 0,ragExamples:l}),m=await (0,n.TE)(c),p=m.text||m.description||m.long_description||m.short_description||"",u=L(p);if(!u)throw Error("AI nevr\xe1tila platn\xfd JSON.");let h=u.name||T.name||"",x=u.description||T.description||"",g=void 0!==u.price_czk?String(u.price_czk):T.price_czk,y=void 0!==u.stock?String(u.stock):T.stock,b=u.category_slug||"",f=t.find(e=>String(e.slug)===String(b))?.id||t.find(e=>String(e.name)===String(o))?.id||"";z(e=>({...e,name:h,description:x,price_czk:g,stock:y,category_id:f?String(f):e.category_id}));let v=t.find(e=>String(e.id)===String(f))?.name||o||"";(0,n.Dj)({category:v,attributes:{labels:a,colors:i,objects:s},description:x}).catch(e=>{console.error("RAG ingest failed:",e)})}catch(e){b(e instanceof Error?e.message:"AI generov\xe1n\xed selhalo.")}finally{v(!1)}},X=(e,t,r,a)=>({category:a,attributes:{labels:e,colors:t,objects:r}}),Q=async()=>{let e=t.find(e=>String(e.id)===String(T.category_id))?.name||"";if(!e)return null;try{return await (0,n.zm)(X([],[],[],e))}catch(e){return console.error("RAG search failed:",e),null}},ee=e=>{let t=L(e);return t&&"string"==typeof t.description?t.description:e},et=e=>{let t=L(e);return t&&Array.isArray(t.bullets)?t.bullets.map(e=>String(e)):e.split("\n").map(e=>e.replace(/^[-•*\s]+/,"").trim()).filter(Boolean)},er=e=>{let t=L(e);if(t&&void 0!==t.price_czk)return String(t.price_czk);let r=e.match(/([0-9]+(?:[.,][0-9]+)?)/);return r?r[1].replace(",","."):""},ea=async()=>{if(!T.description.trim()){b("Nejprve vyplňte popis.");return}b(null),k(!0);try{let e=t.find(e=>String(e.id)===String(T.category_id))?.name||"",r=await Q(),a=["Rewrite the product description in Czech.","Keep the same meaning and structure but improve clarity.",`Name: ${T.name}`,e?`Category: ${e}`:"",r?`Examples: ${JSON.stringify(r)}`:"","Return plain text only.",`Current description: ${T.description}`].filter(Boolean).join("\n"),s=await (0,n.TE)(a),i=s.text||s.description||s.long_description||s.short_description||"",o=ee(i);if(!o)throw Error("AI nevr\xe1tila text.");z(e=>({...e,description:o}))}catch(e){b(e instanceof Error?e.message:"AI generov\xe1n\xed selhalo.")}finally{k(!1)}},es=async()=>{if(!T.description.trim()){b("Nejprve vyplňte popis.");return}b(null),N(!0);try{let e=["Shorten the following Czech product description into a shorter marketing version.","Return plain text only.",T.description].join("\n"),t=await (0,n.TE)(e),r=t.text||t.description||t.long_description||t.short_description||"",a=ee(r);if(!a)throw Error("AI nevr\xe1tila text.");z(e=>({...e,description:a}))}catch(e){b(e instanceof Error?e.message:"AI generov\xe1n\xed selhalo.")}finally{N(!1)}},ei=async()=>{if(!T.description.trim()){b("Nejprve vyplňte popis.");return}b(null),S(!0);try{let e=["Vylepšit marketingov\xfd t\xf3n of the Czech product description.","More emotional and benefit-oriented, no emojis.","Return plain text only.",T.description].join("\n"),t=await (0,n.TE)(e),r=t.text||t.description||t.long_description||t.short_description||"",a=ee(r);if(!a)throw Error("AI nevr\xe1tila text.");z(e=>({...e,description:a}))}catch(e){b(e instanceof Error?e.message:"AI generov\xe1n\xed selhalo.")}finally{S(!1)}},en=async()=>{if(!T.description.trim()){b("Nejprve vyplňte popis.");return}b(null),E(!0);try{let e=["Generate 3-6 bullet highlights in Czech based on the description.","Return bullet points only, each on a new line.",T.description].join("\n"),t=await (0,n.TE)(e),r=t.text||t.description||t.long_description||t.short_description||"",a=et(r);if(!a.length)throw Error("AI nevr\xe1tila body.");let s=a.map(e=>`• ${e}`).join("\n");z(e=>({...e,description:`${e.description}

${s}`.trim()}))}catch(e){b(e instanceof Error?e.message:"AI generov\xe1n\xed selhalo.")}finally{E(!1)}},eo=async()=>{b(null),O(!0);try{let e=t.find(e=>String(e.id)===String(T.category_id))?.name||"",r=await Q(),a=["Suggest a CZK price as a number for this product.","Return only the numeric price.",`Name: ${T.name}`,e?`Category: ${e}`:"",T.description?`Description: ${T.description}`:"",r?`Examples: ${JSON.stringify(r)}`:""].filter(Boolean).join("\n"),s=await (0,n.TE)(a),i=s.text||s.description||s.long_description||s.short_description||"",o=er(i);if(!o)throw Error("AI nevr\xe1tila cenu.");z(e=>({...e,price_czk:o}))}catch(e){b(e instanceof Error?e.message:"AI generov\xe1n\xed selhalo.")}finally{O(!1)}};return a.jsx("main",{className:"min-h-screen bg-gray-50 text-gray-900",children:(0,a.jsxs)("div",{className:"mx-auto max-w-5xl px-6 py-10",children:[(0,a.jsxs)("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-2xl font-semibold",children:"Přidat produkt"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Nov\xfd produkt v administraci."})]}),o&&a.jsx("div",{className:"rounded-md border border-gray-200 bg-white p-6 text-sm text-gray-600",children:"Nač\xedt\xe1n\xed kategori\xed..."}),m&&a.jsx("div",{className:"mb-4 rounded-md border border-red-200 bg-red-50 p-4 text-sm text-red-600",children:m}),y&&a.jsx("div",{className:"mb-4 rounded-md border border-amber-200 bg-amber-50 p-4 text-sm text-amber-700",children:y}),u&&a.jsx("div",{className:"mb-4 rounded-md border border-emerald-200 bg-emerald-50 p-4 text-sm text-emerald-700",children:u}),!o&&(0,a.jsxs)("form",{onSubmit:F,className:"grid gap-6 lg:grid-cols-[2fr_1fr]",children:[(0,a.jsxs)("div",{className:"space-y-4 rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"mb-1 block text-sm font-medium",children:"N\xe1zev produktu"}),a.jsx("input",{type:"text",name:"name",value:T.name,onChange:q,required:!0,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Popis"}),a.jsx("textarea",{name:"description",value:T.description,onChange:q,rows:6,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm"}),(0,a.jsxs)("div",{className:"mt-3 flex flex-wrap gap-2",children:[a.jsx("button",{type:"button",onClick:W,disabled:x,className:"inline-flex items-center gap-2 rounded-md border border-gray-300 px-3 py-2 text-xs font-semibold text-gray-700 hover:bg-gray-100 disabled:opacity-60",children:x?"Generuji...":"Vygenerovat popis z obr\xe1zku (AI)"}),a.jsx("button",{type:"button",onClick:Z,disabled:f,className:"inline-flex items-center gap-2 rounded-md border border-gray-300 px-3 py-2 text-xs font-semibold text-gray-700 hover:bg-gray-100 disabled:opacity-60",children:f?"Generuji...":"Vytvořit produkt pomoc\xed AI"}),a.jsx("button",{type:"button",onClick:ea,disabled:j,className:"inline-flex items-center gap-2 rounded-md border border-gray-300 px-3 py-2 text-xs font-semibold text-gray-700 hover:bg-gray-100 disabled:opacity-60",children:j?"Generuji...":"Přepsat popis (AI)"}),a.jsx("button",{type:"button",onClick:es,disabled:w,className:"inline-flex items-center gap-2 rounded-md border border-gray-300 px-3 py-2 text-xs font-semibold text-gray-700 hover:bg-gray-100 disabled:opacity-60",children:w?"Generuji...":"Zkr\xe1tit popis"}),a.jsx("button",{type:"button",onClick:ei,disabled:_,className:"inline-flex items-center gap-2 rounded-md border border-gray-300 px-3 py-2 text-xs font-semibold text-gray-700 hover:bg-gray-100 disabled:opacity-60",children:_?"Generuji...":"Vylepšit marketingov\xfd t\xf3n"}),a.jsx("button",{type:"button",onClick:en,disabled:P,className:"inline-flex items-center gap-2 rounded-md border border-gray-300 px-3 py-2 text-xs font-semibold text-gray-700 hover:bg-gray-100 disabled:opacity-60",children:P?"Generuji...":"Vygenerovat body v\xfdhod"})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Cena (Kč)"}),a.jsx("input",{type:"number",name:"price_czk",value:T.price_czk,onChange:q,step:"0.01",required:!0,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm"}),a.jsx("button",{type:"button",onClick:eo,disabled:C,className:"mt-2 inline-flex items-center gap-2 rounded-md border border-gray-300 px-3 py-2 text-xs font-semibold text-gray-700 hover:bg-gray-100 disabled:opacity-60",children:C?"Generuji...":"Navrhnout lepš\xed cenu"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Počet kusů (stock)"}),a.jsx("input",{type:"number",name:"stock",value:T.stock,onChange:q,required:!0,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Obvod / velikost produktu"}),a.jsx("input",{type:"text",name:"wrist_size",value:T.wrist_size,onChange:q,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm",placeholder:"Např. 16 cm nebo 15-17 cm"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Kategorie"}),(0,a.jsxs)("select",{name:"category_id",value:T.category_id,onChange:q,required:!0,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm",children:[a.jsx("option",{value:"",children:"-- Vyber kategorii --"}),H.map(e=>a.jsx("option",{value:String(e.id),children:e.label},e.id))]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"mb-1 block text-sm font-medium",children:"Varianty"}),(0,a.jsxs)("div",{className:"space-y-3",children:[A.map((e,t)=>(0,a.jsxs)("div",{className:"rounded-lg border border-gray-200 p-4",children:[(0,a.jsxs)("div",{className:"grid gap-3 md:grid-cols-3",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-500",children:"N\xe1zev varianty"}),a.jsx("input",{type:"text",value:e.variant_name||"",onChange:e=>K(t,{variant_name:e.target.value}),className:"w-full rounded-md border border-gray-300 px-2 py-1 text-sm"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-500",children:"Obvod / velikost"}),a.jsx("input",{type:"text",value:e.wrist_size||"",onChange:e=>K(t,{wrist_size:e.target.value}),className:"w-full rounded-md border border-gray-300 px-2 py-1 text-sm"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-500",children:"Cena varianty"}),a.jsx("input",{type:"number",step:"0.01",value:e.price_czk??"",onChange:e=>K(t,{price_czk:e.target.value?Number(e.target.value):null}),className:"w-full rounded-md border border-gray-300 px-2 py-1 text-sm"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-500",children:"Sklad varianty"}),a.jsx("input",{type:"number",value:e.stock??0,onChange:e=>K(t,{stock:Number(e.target.value)}),className:"w-full rounded-md border border-gray-300 px-2 py-1 text-sm"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-500",children:"Popis varianty"}),a.jsx("textarea",{value:e.description||"",onChange:e=>K(t,{description:e.target.value}),rows:2,className:"w-full rounded-md border border-gray-300 px-2 py-1 text-sm"})]})]}),(0,a.jsxs)("div",{className:"mt-3",children:[a.jsx("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-500",children:"Obr\xe1zek varianty"}),a.jsx("input",{type:"file",accept:"image/*",onChange:e=>K(t,{imageFile:e.target.files?.[0]||null})})]}),(0,a.jsxs)("div",{className:"mt-3",children:[a.jsx("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-500",children:"Dalš\xed fotky varianty"}),a.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:e=>K(t,{extraFiles:Array.from(e.target.files||[])})})]}),a.jsx("div",{className:"mt-3 text-right",children:a.jsx("button",{type:"button",onClick:()=>U(t),className:"rounded-md border border-red-200 px-3 py-1 text-xs text-red-700",children:"Odstranit variantu"})})]},t)),a.jsx("button",{type:"button",onClick:()=>{R(e=>[...e,{variant_name:"",wrist_size:"",description:"",price_czk:null,stock:0,image:null,image_url:null,media:[],imageFile:null,extraFiles:[]}])},className:"rounded-md border border-gray-300 px-3 py-2 text-xs font-semibold text-gray-700",children:"+ Přidat variantu"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white p-5 shadow-sm",children:[a.jsx("label",{className:"mb-2 block text-sm font-medium",children:"\xdavodn\xed obr\xe1zek"}),a.jsx("input",{type:"file",name:"image",accept:"image/*",onChange:e=>{let t=e.target.files?.[0]||null;z(e=>({...e,image:t}))},className:"w-full text-sm"}),J&&(0,a.jsxs)("div",{className:"mt-4",children:[a.jsx("div",{className:"h-28 w-28 overflow-hidden rounded-lg border border-gray-200 shadow",children:a.jsx("img",{src:J,alt:"preview",className:"h-full w-full object-cover"})}),a.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"N\xe1hled hlavn\xedho obr\xe1zku."})]}),a.jsx("p",{className:"mt-3 text-xs text-gray-500",children:"Upload: /static/uploads/"})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white p-5 shadow-sm",children:[a.jsx("label",{className:"mb-2 block text-sm font-medium",children:"Dalš\xed obr\xe1zky nebo videa"}),a.jsx("input",{type:"file",name:"media",accept:"image/*,video/*",multiple:!0,onChange:e=>{D(Array.from(e.target.files||[]))},className:"w-full text-sm"}),G.length>0&&a.jsx("div",{className:"mt-4 grid grid-cols-3 gap-2",children:G.map((e,t)=>a.jsx("div",{className:"h-20 w-20 overflow-hidden rounded-lg bg-gray-100",children:e.type.startsWith("video")?a.jsx("video",{src:e.url,className:"h-full w-full object-cover",muted:!0}):a.jsx("img",{src:e.url,alt:"media",className:"h-full w-full object-cover"})},t))})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white p-5 shadow-sm",children:[a.jsx("h3",{className:"text-sm font-semibold text-gray-700",children:"Akce"}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Zkontrolujte data, pot\xe9 potvrďte vytvořen\xed produktu."}),(0,a.jsxs)("div",{className:"mt-4 flex flex-col gap-2",children:[a.jsx("button",{type:"submit",disabled:d,className:"rounded-md bg-gray-900 px-4 py-2 text-sm font-semibold text-white hover:bg-gray-800 disabled:opacity-60",children:d?"Ukl\xe1d\xe1m...":"Uložit"}),a.jsx("button",{type:"button",onClick:()=>e.push("/admin/products"),className:"rounded-md border border-gray-300 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Zpět"})]})]})]})]})]})})}},6824:(e,t,r)=>{"use strict";r.d(t,{Bd:()=>k,Dj:()=>h,Ir:()=>m,QX:()=>j,RA:()=>p,SN:()=>v,TE:()=>u,c0:()=>f,cW:()=>y,f8:()=>i,gF:()=>b,h6:()=>g,k4:()=>n,nM:()=>c,ry:()=>d,uu:()=>l,yr:()=>o,zm:()=>x});let a="/api",s=a.includes("backend")?"/api":a;function i(e){let t=e.startsWith("/")?e:`/${e}`;return"/api"===s?t.startsWith("/api/")||"/api"===t?t:`/api${t}`:`${s}${t}`}async function n(e){let t=await fetch(i("/api/categories/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=`Nepodařilo se vytvořit kategorii (${t.status})`;try{let r=await t.json();e=r?.error||r?.message||r?.detail||e}catch{}throw Error(e)}return await t.json()}async function o(e,t){let r=await fetch(i(`/api/categories/${e}`),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok){let e=`Nepodařilo se uložit kategorii (${r.status})`;try{let t=await r.json();e=t?.error||t?.message||t?.detail||e}catch{}throw Error(e)}return await r.json()}async function l(e,t=!1){let r=t?`/api/categories/${e}?force=true`:`/api/categories/${e}`,a=await fetch(i(r),{method:"DELETE"});if(!a.ok){let e=`Nepodařilo se smazat kategorii (${a.status})`;try{let t=await a.json();e=t?.error||t?.message||t?.detail||e}catch{}throw Error(e)}}async function d(e){let t=await fetch(i("/api/products/"),{method:"POST",body:e});if(!t.ok){let e=`Nepodařilo se vytvořit produkt (${t.status})`;try{let r=await t.json();e=r?.error||r?.message||r?.detail||e}catch{}throw Error(e)}return await t.json()}async function c(e,t){let r=await fetch(i(`/api/products/${e}`),{method:"PUT",body:t});if(!r.ok){let e=`Nepodařilo se uložit produkt (${r.status})`;try{let t=await r.json();e=t?.error||t?.message||t?.detail||e}catch{}throw Error(e)}return await r.json()}async function m(e){let t=await fetch(i(`/api/products/${e}`),{method:"DELETE"});if(!t.ok){let e=`Nepodařilo se smazat produkt (${t.status})`;try{let r=await t.json();e=r?.error||r?.message||r?.detail||e}catch{}throw Error(e)}}async function p(e){let t=await fetch(i("/api/ai/vision/analyze"),{method:"POST",body:e});if(!t.ok){let e=`Anal\xfdza obr\xe1zku selhala (${t.status})`;try{let r=await t.json();e=r?.error||r?.message||r?.detail||e}catch{}throw Error(e)}return await t.json()}async function u(e){let t=await fetch(i("/api/ai/deepseek/generate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({context:e})});if(!t.ok){let e=`Generov\xe1n\xed popisu selhalo (${t.status})`;try{let r=await t.json();e=r?.error||r?.message||r?.detail||e}catch{}throw Error(e)}return await t.json()}async function h(e){await fetch(i("/api/ai/rag/ingest"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}async function x(e){let t=await fetch(i("/api/ai/rag/search"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=`Vyhled\xe1v\xe1n\xed v RAG selhalo (${t.status})`;try{let r=await t.json();e=r?.error||r?.message||r?.detail||e}catch{}throw Error(e)}return t.json()}async function g(e){let t=await fetch(i(`/api/media/${e}`),{method:"DELETE"});if(!t.ok){let e=`Smaz\xe1n\xed m\xe9dia selhalo (${t.status})`;try{let r=await t.json();e=r?.error||r?.message||r?.detail||e}catch{}throw Error(e)}}async function y(e){let t=await fetch(i("/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=`Přihl\xe1šen\xed selhalo (${t.status})`;try{let r=await t.json();e=r?.error||r?.message||r?.detail||e}catch{}throw Error(e)}}async function b(e){let t=await fetch(i("/api/auth/forgot"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=`Odesl\xe1n\xed odkazu selhalo (${t.status})`;try{let r=await t.json();e=r?.error||r?.message||r?.detail||e}catch{}throw Error(e)}}async function f(e){let t=await fetch(i("/api/auth/reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=`Reset hesla selhal (${t.status})`;try{let r=await t.json();e=r?.error||r?.message||r?.detail||e}catch{}throw Error(e)}}function v(e,t){let r=new URLSearchParams;return Object.entries(t).forEach(([e,t])=>{t&&r.set(e,t)}),i(`/api/sold/export/${e}?${r.toString()}`)}function j(e){return i(`/api/sold/${e}/invoice-preview`)}async function k(e){let t=await fetch(i(`/api/sold/${e}/invoice-send`),{method:"POST"});if(!t.ok){let e=`Odesl\xe1n\xed faktury selhalo (${t.status})`;try{let r=await t.json();e=r?.error||r?.message||r?.detail||e}catch{}throw Error(e)}}},596:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>o});var a=r(8570);let s=(0,a.createProxy)(String.raw`C:\Users\lukas\Desktop\PYTHON_PROJECTS_DESKTOP\PYTHON_PROJECTS\nmm_docker\naramkovamoda-v2\frontend\admin\app\admin\layout.tsx`),{__esModule:i,$$typeof:n}=s;s.default;let o=(0,a.createProxy)(String.raw`C:\Users\lukas\Desktop\PYTHON_PROJECTS_DESKTOP\PYTHON_PROJECTS\nmm_docker\naramkovamoda-v2\frontend\admin\app\admin\layout.tsx#default`)},8917:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>o});var a=r(8570);let s=(0,a.createProxy)(String.raw`C:\Users\lukas\Desktop\PYTHON_PROJECTS_DESKTOP\PYTHON_PROJECTS\nmm_docker\naramkovamoda-v2\frontend\admin\app\admin\products\new\page.tsx`),{__esModule:i,$$typeof:n}=s;s.default;let o=(0,a.createProxy)(String.raw`C:\Users\lukas\Desktop\PYTHON_PROJECTS_DESKTOP\PYTHON_PROJECTS\nmm_docker\naramkovamoda-v2\frontend\admin\app\admin\products\new\page.tsx#default`)},1506:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i,metadata:()=>s});var a=r(9510);r(7272);let s={title:"Admin"};function i({children:e}){return a.jsx("html",{lang:"cs",children:a.jsx("body",{className:"min-h-screen bg-white text-black",children:e})})}},7272:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[819,496],()=>r(6197));module.exports=a})();