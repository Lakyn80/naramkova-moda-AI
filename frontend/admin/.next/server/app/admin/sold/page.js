(()=>{var e={};e.id=395,e.ids=[395],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9313:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>h,originalPathname:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>d}),a(8863),a(596),a(1506),a(5866);var r=a(3191),s=a(8716),o=a(7922),n=a.n(o),i=a(5231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);a.d(t,l);let d=["",{children:["admin",{children:["sold",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,8863)),"C:\\Users\\lukas\\Desktop\\PYTHON_PROJECTS_DESKTOP\\PYTHON_PROJECTS\\nmm_docker\\naramkovamoda-v2\\frontend\\admin\\app\\admin\\sold\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,596)),"C:\\Users\\lukas\\Desktop\\PYTHON_PROJECTS_DESKTOP\\PYTHON_PROJECTS\\nmm_docker\\naramkovamoda-v2\\frontend\\admin\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,1506)),"C:\\Users\\lukas\\Desktop\\PYTHON_PROJECTS_DESKTOP\\PYTHON_PROJECTS\\nmm_docker\\naramkovamoda-v2\\frontend\\admin\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\lukas\\Desktop\\PYTHON_PROJECTS_DESKTOP\\PYTHON_PROJECTS\\nmm_docker\\naramkovamoda-v2\\frontend\\admin\\app\\admin\\sold\\page.tsx"],m="/admin/sold/page",h={require:a,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/admin/sold/page",pathname:"/admin/sold",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9960:(e,t,a)=>{Promise.resolve().then(a.bind(a,2802))},9945:(e,t,a)=>{Promise.resolve().then(a.bind(a,2430))},6686:()=>{},2573:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,2994,23)),Promise.resolve().then(a.t.bind(a,6114,23)),Promise.resolve().then(a.t.bind(a,9727,23)),Promise.resolve().then(a.t.bind(a,9671,23)),Promise.resolve().then(a.t.bind(a,1868,23)),Promise.resolve().then(a.t.bind(a,4759,23))},2802:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var r=a(326),s=a(434),o=a(5047),n=a(7577),i=a(6824);let l=[{href:"/admin/products",label:"\uD83D\uDCE6 Produkty"},{href:"/admin/categories",label:"\uD83D\uDCC2 Kategorie"},{href:"/admin/sold",label:"\uD83D\uDCCA Prodan\xe9"},{href:"/admin/payments",label:"\uD83D\uDCB3 Platby"},{href:"/admin/media",label:"\uD83D\uDDBC️ M\xe9dia"}];function d({children:e}){let t=(0,o.usePathname)(),a=(0,o.useRouter)(),[d,c]=(0,n.useState)(null),m=t.startsWith("/admin/login")||t.startsWith("/admin/forgot")||t.startsWith("/admin/reset"),h=async()=>{c(null);try{if(!(await fetch((0,i.f8)("/api/auth/logout"),{method:"POST"})).ok)throw Error("Odhl\xe1šen\xed se nezdařilo.");a.push("/admin/login")}catch(e){c(e instanceof Error?e.message:"Odhl\xe1šen\xed se nezdařilo.")}};return m?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-600 via-blue-600 to-sky-500 text-gray-900",children:e}):(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50 text-gray-900",children:[r.jsx("header",{className:"fixed inset-x-0 top-0 z-30 bg-gradient-to-br from-slate-900 via-slate-800 to-blue-900 text-white shadow",children:(0,r.jsxs)("div",{className:"mx-auto flex max-w-6xl flex-wrap items-center justify-between gap-4 px-6 py-3",children:[(0,r.jsxs)(s.default,{href:"/admin",className:"flex items-center gap-3 text-lg font-semibold",children:[r.jsx("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-full bg-white/10",children:"NM"}),r.jsx("span",{children:"Admin"})]}),(0,r.jsxs)("nav",{className:"flex flex-wrap items-center gap-4 text-sm text-white/90",children:[l.map(e=>r.jsx(s.default,{href:e.href,className:"hover:text-white",children:e.label},e.href)),r.jsx("button",{type:"button",onClick:h,className:"rounded-full border border-white/30 px-3 py-1 text-sm hover:border-white/70 hover:text-white",children:"\uD83D\uDEAA Odhl\xe1sit"})]})]})}),r.jsx("main",{className:"mx-auto max-w-6xl px-6 pb-8 pt-24",children:e}),d&&r.jsx("div",{className:"fixed right-6 top-24 z-40 rounded-lg bg-red-600 px-4 py-3 text-sm text-white shadow-lg",children:d})]})}},2430:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var r=a(326),s=a(7577),o=a(5047),n=a(6824);function i(e){return null==e?"-":`${Number(e).toFixed(2)} Kč`}function l(){let e=(0,o.useSearchParams)(),[t,a]=(0,s.useState)([]),[l,d]=(0,s.useState)(null),[c,m]=(0,s.useState)(!0),[h,p]=(0,s.useState)(null),[u,x]=(0,s.useState)(null),f=e.get("from")||"",y=e.get("to")||"",g=(e,t)=>{let a=new URLSearchParams;e&&a.set("from",e),t&&a.set("to",t);let r=a.toString();window.location.href=r?`/admin/sold?${r}`:"/admin/sold"},b=async e=>{x(e);try{await (0,n.Bd)(e)}catch(e){alert(e instanceof Error?e.message:"Odesl\xe1n\xed selhalo")}finally{x(null)}},j=(0,n.SN)("xlsx",{from:f,to:y}),N=(0,n.SN)("pdf",{from:f,to:y});return(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("h2",{className:"text-2xl font-semibold",children:"Prodan\xe9"}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-4 rounded-lg border border-gray-200 bg-white p-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Od:"}),r.jsx("input",{type:"date",value:f,onChange:e=>g(e.target.value,y),className:"rounded border border-gray-300 px-2 py-1 text-sm"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx("label",{className:"text-sm font-medium",children:"Do:"}),r.jsx("input",{type:"date",value:y,onChange:e=>g(f,e.target.value),className:"rounded border border-gray-300 px-2 py-1 text-sm"})]}),r.jsx("button",{type:"button",onClick:()=>g("",""),className:"rounded border border-gray-300 px-3 py-1 text-sm hover:bg-gray-50",children:"Reset"}),r.jsx("a",{href:j,target:"_blank",rel:"noreferrer",className:"rounded border border-emerald-300 bg-emerald-50 px-3 py-1 text-sm text-emerald-700 hover:bg-emerald-100",children:"Export Excel"}),r.jsx("a",{href:N,target:"_blank",rel:"noreferrer",className:"rounded border border-blue-300 bg-blue-50 px-3 py-1 text-sm text-blue-700 hover:bg-blue-100",children:"Export PDF"})]}),l&&(0,r.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-4 text-sm",children:["Počet: ",r.jsx("strong",{children:l.count??0})," | Celkem:"," ",r.jsx("strong",{children:i(l.total_amount??0)})]}),c&&r.jsx("div",{className:"rounded-md border border-gray-200 bg-white p-6 text-sm text-gray-600",children:"Nač\xedt\xe1n\xed..."}),h&&r.jsx("div",{className:"rounded-md border border-red-200 bg-red-50 p-4 text-sm text-red-600",children:h}),!c&&!h&&(0,r.jsxs)("div",{className:"overflow-x-auto rounded-lg border border-gray-200 bg-white",children:[(0,r.jsxs)("table",{className:"w-full text-sm",children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{className:"border-b border-gray-200 bg-gray-50",children:[r.jsx("th",{className:"px-4 py-2 text-left font-semibold",children:"ID"}),r.jsx("th",{className:"px-4 py-2 text-left font-semibold",children:"Produkt"}),r.jsx("th",{className:"px-4 py-2 text-right font-semibold",children:"Ks"}),r.jsx("th",{className:"px-4 py-2 text-right font-semibold",children:"Cena/ks"}),r.jsx("th",{className:"px-4 py-2 text-right font-semibold",children:"Celkem"}),r.jsx("th",{className:"px-4 py-2 text-left font-semibold",children:"Email"}),r.jsx("th",{className:"px-4 py-2 text-left font-semibold",children:"VS"}),r.jsx("th",{className:"px-4 py-2 text-left font-semibold",children:"Datum"}),r.jsx("th",{className:"px-4 py-2 text-left font-semibold",children:"Akce"})]})}),r.jsx("tbody",{children:t.map(e=>(0,r.jsxs)("tr",{className:"border-b border-gray-100",children:[r.jsx("td",{className:"px-4 py-2",children:e.id}),r.jsx("td",{className:"px-4 py-2",children:e.product_name??"-"}),r.jsx("td",{className:"px-4 py-2 text-right",children:e.quantity??0}),r.jsx("td",{className:"px-4 py-2 text-right",children:i(e.unit_price_czk??e.unit_price??e.price_czk)}),r.jsx("td",{className:"px-4 py-2 text-right",children:i(e.total_czk)}),r.jsx("td",{className:"px-4 py-2 text-xs",children:e.customer_email??"-"}),r.jsx("td",{className:"px-4 py-2",children:e.vs??"-"}),r.jsx("td",{className:"px-4 py-2 text-xs",children:e.sold_at?e.sold_at.slice(0,16).replace("T"," "):"-"}),r.jsx("td",{className:"px-4 py-2",children:e.id&&(0,r.jsxs)("span",{className:"flex gap-1",children:[r.jsx("a",{href:(0,n.QX)(e.id),target:"_blank",rel:"noreferrer",className:"text-blue-600 hover:underline",children:"Faktura"}),r.jsx("button",{type:"button",onClick:()=>b(e.id),disabled:u===e.id,className:"text-emerald-600 hover:underline disabled:opacity-50",children:u===e.id?"Odes\xedl\xe1m...":"E-mail"})]})})]},e.id??Math.random()))})]}),0===t.length&&r.jsx("div",{className:"p-8 text-center text-gray-500",children:"Ž\xe1dn\xe9 prodan\xe9 položky"})]})]})}function d(){return r.jsx(s.Suspense,{fallback:r.jsx("div",{className:"rounded-md border border-gray-200 bg-white p-6 text-sm text-gray-600",children:"Nač\xedt\xe1n\xed..."}),children:r.jsx(l,{})})}},6824:(e,t,a)=>{"use strict";a.d(t,{Bd:()=>P,Dj:()=>u,Ir:()=>m,QX:()=>N,RA:()=>h,SN:()=>j,TE:()=>p,c0:()=>b,cW:()=>y,f8:()=>o,gF:()=>g,h6:()=>f,k4:()=>n,nM:()=>c,ry:()=>d,uu:()=>l,yr:()=>i,zm:()=>x});let r="/api",s=r.includes("backend")?"/api":r;function o(e){let t=e.startsWith("/")?e:`/${e}`;return"/api"===s?t.startsWith("/api/")||"/api"===t?t:`/api${t}`:`${s}${t}`}async function n(e){let t=await fetch(o("/api/categories/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=`Nepodařilo se vytvořit kategorii (${t.status})`;try{let a=await t.json();e=a?.error||a?.message||a?.detail||e}catch{}throw Error(e)}return await t.json()}async function i(e,t){let a=await fetch(o(`/api/categories/${e}`),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok){let e=`Nepodařilo se uložit kategorii (${a.status})`;try{let t=await a.json();e=t?.error||t?.message||t?.detail||e}catch{}throw Error(e)}return await a.json()}async function l(e,t=!1){let a=t?`/api/categories/${e}?force=true`:`/api/categories/${e}`,r=await fetch(o(a),{method:"DELETE"});if(!r.ok){let e=`Nepodařilo se smazat kategorii (${r.status})`;try{let t=await r.json();e=t?.error||t?.message||t?.detail||e}catch{}throw Error(e)}}async function d(e){let t=await fetch(o("/api/products/"),{method:"POST",body:e});if(!t.ok){let e=`Nepodařilo se vytvořit produkt (${t.status})`;try{let a=await t.json();e=a?.error||a?.message||a?.detail||e}catch{}throw Error(e)}return await t.json()}async function c(e,t){let a=await fetch(o(`/api/products/${e}`),{method:"PUT",body:t});if(!a.ok){let e=`Nepodařilo se uložit produkt (${a.status})`;try{let t=await a.json();e=t?.error||t?.message||t?.detail||e}catch{}throw Error(e)}return await a.json()}async function m(e){let t=await fetch(o(`/api/products/${e}`),{method:"DELETE"});if(!t.ok){let e=`Nepodařilo se smazat produkt (${t.status})`;try{let a=await t.json();e=a?.error||a?.message||a?.detail||e}catch{}throw Error(e)}}async function h(e){let t=await fetch(o("/api/ai/vision/analyze"),{method:"POST",body:e});if(!t.ok){let e=`Anal\xfdza obr\xe1zku selhala (${t.status})`;try{let a=await t.json();e=a?.error||a?.message||a?.detail||e}catch{}throw Error(e)}return await t.json()}async function p(e){let t=await fetch(o("/api/ai/deepseek/generate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({context:e})});if(!t.ok){let e=`Generov\xe1n\xed popisu selhalo (${t.status})`;try{let a=await t.json();e=a?.error||a?.message||a?.detail||e}catch{}throw Error(e)}return await t.json()}async function u(e){await fetch(o("/api/ai/rag/ingest"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}async function x(e){let t=await fetch(o("/api/ai/rag/search"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=`Vyhled\xe1v\xe1n\xed v RAG selhalo (${t.status})`;try{let a=await t.json();e=a?.error||a?.message||a?.detail||e}catch{}throw Error(e)}return t.json()}async function f(e){let t=await fetch(o(`/api/media/${e}`),{method:"DELETE"});if(!t.ok){let e=`Smaz\xe1n\xed m\xe9dia selhalo (${t.status})`;try{let a=await t.json();e=a?.error||a?.message||a?.detail||e}catch{}throw Error(e)}}async function y(e){let t=await fetch(o("/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=`Přihl\xe1šen\xed selhalo (${t.status})`;try{let a=await t.json();e=a?.error||a?.message||a?.detail||e}catch{}throw Error(e)}}async function g(e){let t=await fetch(o("/api/auth/forgot"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=`Odesl\xe1n\xed odkazu selhalo (${t.status})`;try{let a=await t.json();e=a?.error||a?.message||a?.detail||e}catch{}throw Error(e)}}async function b(e){let t=await fetch(o("/api/auth/reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=`Reset hesla selhal (${t.status})`;try{let a=await t.json();e=a?.error||a?.message||a?.detail||e}catch{}throw Error(e)}}function j(e,t){let a=new URLSearchParams;return Object.entries(t).forEach(([e,t])=>{t&&a.set(e,t)}),o(`/api/sold/export/${e}?${a.toString()}`)}function N(e){return o(`/api/sold/${e}/invoice-preview`)}async function P(e){let t=await fetch(o(`/api/sold/${e}/invoice-send`),{method:"POST"});if(!t.ok){let e=`Odesl\xe1n\xed faktury selhalo (${t.status})`;try{let a=await t.json();e=a?.error||a?.message||a?.detail||e}catch{}throw Error(e)}}},596:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>n,__esModule:()=>o,default:()=>i});var r=a(8570);let s=(0,r.createProxy)(String.raw`C:\Users\lukas\Desktop\PYTHON_PROJECTS_DESKTOP\PYTHON_PROJECTS\nmm_docker\naramkovamoda-v2\frontend\admin\app\admin\layout.tsx`),{__esModule:o,$$typeof:n}=s;s.default;let i=(0,r.createProxy)(String.raw`C:\Users\lukas\Desktop\PYTHON_PROJECTS_DESKTOP\PYTHON_PROJECTS\nmm_docker\naramkovamoda-v2\frontend\admin\app\admin\layout.tsx#default`)},8863:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>n,__esModule:()=>o,default:()=>i});var r=a(8570);let s=(0,r.createProxy)(String.raw`C:\Users\lukas\Desktop\PYTHON_PROJECTS_DESKTOP\PYTHON_PROJECTS\nmm_docker\naramkovamoda-v2\frontend\admin\app\admin\sold\page.tsx`),{__esModule:o,$$typeof:n}=s;s.default;let i=(0,r.createProxy)(String.raw`C:\Users\lukas\Desktop\PYTHON_PROJECTS_DESKTOP\PYTHON_PROJECTS\nmm_docker\naramkovamoda-v2\frontend\admin\app\admin\sold\page.tsx#default`)},1506:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>o,metadata:()=>s});var r=a(9510);a(7272);let s={title:"Admin"};function o({children:e}){return r.jsx("html",{lang:"cs",children:r.jsx("body",{className:"min-h-screen bg-white text-black",children:e})})}},7272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[819,496],()=>a(9313));module.exports=r})();