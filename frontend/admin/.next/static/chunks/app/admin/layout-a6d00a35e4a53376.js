(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[91],{1909:function(t,e,a){Promise.resolve().then(a.bind(a,5804))},5804:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return c}});var n=a(7437),o=a(7138),r=a(6463),i=a(2265),l=a(6264);let s=[{href:"/admin/products",label:"\uD83D\uDCE6 Produkty"},{href:"/admin/categories",label:"\uD83D\uDCC2 Kategorie"},{href:"/admin/sold",label:"\uD83D\uDCCA Prodan\xe9"},{href:"/admin/payments",label:"\uD83D\uDCB3 Platby"},{href:"/admin/media",label:"\uD83D\uDDBC️ M\xe9dia"}];function c(t){let{children:e}=t,a=(0,r.usePathname)(),c=(0,r.useRouter)(),[u,d]=(0,i.useState)(null),h=a.startsWith("/admin/login")||a.startsWith("/admin/forgot")||a.startsWith("/admin/reset"),f=async()=>{d(null);try{if(!(await fetch((0,l.f8)("/api/auth/logout"),{method:"POST"})).ok)throw Error("Odhl\xe1šen\xed se nezdařilo.");c.push("/admin/login")}catch(t){d(t instanceof Error?t.message:"Odhl\xe1šen\xed se nezdařilo.")}};return h?(0,n.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-600 via-blue-600 to-sky-500 text-gray-900",children:e}):(0,n.jsxs)("div",{className:"min-h-screen bg-gray-50 text-gray-900",children:[(0,n.jsx)("header",{className:"fixed inset-x-0 top-0 z-30 bg-gradient-to-br from-slate-900 via-slate-800 to-blue-900 text-white shadow",children:(0,n.jsxs)("div",{className:"mx-auto flex max-w-6xl flex-wrap items-center justify-between gap-4 px-6 py-3",children:[(0,n.jsxs)(o.default,{href:"/admin",className:"flex items-center gap-3 text-lg font-semibold",children:[(0,n.jsx)("span",{className:"inline-flex h-9 w-9 items-center justify-center rounded-full bg-white/10",children:"NM"}),(0,n.jsx)("span",{children:"Admin"})]}),(0,n.jsxs)("nav",{className:"flex flex-wrap items-center gap-4 text-sm text-white/90",children:[s.map(t=>(0,n.jsx)(o.default,{href:t.href,className:"hover:text-white",children:t.label},t.href)),(0,n.jsx)("button",{type:"button",onClick:f,className:"rounded-full border border-white/30 px-3 py-1 text-sm hover:border-white/70 hover:text-white",children:"\uD83D\uDEAA Odhl\xe1sit"})]})]})}),(0,n.jsx)("main",{className:"mx-auto max-w-6xl px-6 pb-8 pt-24",children:e}),u&&(0,n.jsx)("div",{className:"fixed right-6 top-24 z-40 rounded-lg bg-red-600 px-4 py-3 text-sm text-white shadow-lg",children:u})]})}},6264:function(t,e,a){"use strict";a.d(e,{$Y:function(){return S},Bd:function(){return T},Dj:function(){return y},Hy:function(){return N},Ir:function(){return m},MX:function(){return l},QX:function(){return O},RA:function(){return w},SN:function(){return P},TE:function(){return v},c0:function(){return x},cQ:function(){return E},cW:function(){return k},f8:function(){return r},gF:function(){return b},h6:function(){return j},jn:function(){return s},k4:function(){return u},nM:function(){return p},pE:function(){return c},ry:function(){return f},t2:function(){return i},uu:function(){return h},yr:function(){return d},zm:function(){return g}});let n="/api",o=n.includes("backend")?"/api":n;function r(t){let e=t.startsWith("/")?t:"/".concat(t);return"/api"===o?e.startsWith("/api/")||"/api"===e?e:"/api".concat(e):"".concat(o).concat(e)}async function i(){let t=await fetch(r("/api/products/"),{cache:"no-store"});if(!t.ok)throw Error("Nepodařilo se nač\xedst produkty (".concat(t.status,")"));return await t.json()}async function l(t){let e=await fetch(r("/api/products/".concat(t)),{cache:"no-store"});if(!e.ok)throw Error("Nepodařilo se nač\xedst produkt (".concat(e.status,")"));return await e.json()}async function s(t){let e=await fetch(r("/api/categories/".concat(t)),{cache:"no-store"});if(!e.ok)throw Error("Nepodařilo se nač\xedst kategorii (".concat(e.status,")"));return await e.json()}async function c(){let t=await fetch(r("/api/categories/"),{cache:"no-store"});if(!t.ok)throw Error("Nepodařilo se nač\xedst kategorie (".concat(t.status,")"));return await t.json()}async function u(t){let e=await fetch(r("/api/categories/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){let t="Nepodařilo se vytvořit kategorii (".concat(e.status,")");try{let a=await e.json();t=(null==a?void 0:a.error)||(null==a?void 0:a.message)||(null==a?void 0:a.detail)||t}catch(t){}throw Error(t)}return await e.json()}async function d(t,e){let a=await fetch(r("/api/categories/".concat(t)),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok){let t="Nepodařilo se uložit kategorii (".concat(a.status,")");try{let e=await a.json();t=(null==e?void 0:e.error)||(null==e?void 0:e.message)||(null==e?void 0:e.detail)||t}catch(t){}throw Error(t)}return await a.json()}async function h(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=await fetch(r(e?"/api/categories/".concat(t,"?force=true"):"/api/categories/".concat(t)),{method:"DELETE"});if(!a.ok){let t="Nepodařilo se smazat kategorii (".concat(a.status,")");try{let e=await a.json();t=(null==e?void 0:e.error)||(null==e?void 0:e.message)||(null==e?void 0:e.detail)||t}catch(t){}throw Error(t)}}async function f(t){let e=await fetch(r("/api/products/"),{method:"POST",body:t});if(!e.ok){let t="Nepodařilo se vytvořit produkt (".concat(e.status,")");try{let a=await e.json();t=(null==a?void 0:a.error)||(null==a?void 0:a.message)||(null==a?void 0:a.detail)||t}catch(t){}throw Error(t)}return await e.json()}async function p(t,e){let a=await fetch(r("/api/products/".concat(t)),{method:"PUT",body:e});if(!a.ok){let t="Nepodařilo se uložit produkt (".concat(a.status,")");try{let e=await a.json();t=(null==e?void 0:e.error)||(null==e?void 0:e.message)||(null==e?void 0:e.detail)||t}catch(t){}throw Error(t)}return await a.json()}async function m(t){let e=await fetch(r("/api/products/".concat(t)),{method:"DELETE"});if(!e.ok){let t="Nepodařilo se smazat produkt (".concat(e.status,")");try{let a=await e.json();t=(null==a?void 0:a.error)||(null==a?void 0:a.message)||(null==a?void 0:a.detail)||t}catch(t){}throw Error(t)}}async function w(t){let e=await fetch(r("/api/ai/vision/analyze"),{method:"POST",body:t});if(!e.ok){let t="Anal\xfdza obr\xe1zku selhala (".concat(e.status,")");try{let a=await e.json();t=(null==a?void 0:a.error)||(null==a?void 0:a.message)||(null==a?void 0:a.detail)||t}catch(t){}throw Error(t)}return await e.json()}async function v(t){let e=await fetch(r("/api/ai/deepseek/generate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({context:t})});if(!e.ok){let t="Generov\xe1n\xed popisu selhalo (".concat(e.status,")");try{let a=await e.json();t=(null==a?void 0:a.error)||(null==a?void 0:a.message)||(null==a?void 0:a.detail)||t}catch(t){}throw Error(t)}return await e.json()}async function y(t){await fetch(r("/api/ai/rag/ingest"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}async function g(t){let e=await fetch(r("/api/ai/rag/search"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){let t="Vyhled\xe1v\xe1n\xed v RAG selhalo (".concat(e.status,")");try{let a=await e.json();t=(null==a?void 0:a.error)||(null==a?void 0:a.message)||(null==a?void 0:a.detail)||t}catch(t){}throw Error(t)}return e.json()}async function j(t){let e=await fetch(r("/api/media/".concat(t)),{method:"DELETE"});if(!e.ok){let t="Smaz\xe1n\xed m\xe9dia selhalo (".concat(e.status,")");try{let a=await e.json();t=(null==a?void 0:a.error)||(null==a?void 0:a.message)||(null==a?void 0:a.detail)||t}catch(t){}throw Error(t)}}async function k(t){let e=await fetch(r("/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){let t="Přihl\xe1šen\xed selhalo (".concat(e.status,")");try{let a=await e.json();t=(null==a?void 0:a.error)||(null==a?void 0:a.message)||(null==a?void 0:a.detail)||t}catch(t){}throw Error(t)}}async function b(t){let e=await fetch(r("/api/auth/forgot"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){let t="Odesl\xe1n\xed odkazu selhalo (".concat(e.status,")");try{let a=await e.json();t=(null==a?void 0:a.error)||(null==a?void 0:a.message)||(null==a?void 0:a.detail)||t}catch(t){}throw Error(t)}}async function x(t){let e=await fetch(r("/api/auth/reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){let t="Reset hesla selhal (".concat(e.status,")");try{let a=await e.json();t=(null==a?void 0:a.error)||(null==a?void 0:a.message)||(null==a?void 0:a.detail)||t}catch(t){}throw Error(t)}}async function E(t){var e,a,n,o;let i=new URLSearchParams;t.vs&&i.set("vs",t.vs),t.status&&"all"!==t.status&&i.set("status",t.status),t.limit&&i.set("per_page",String(t.limit));let l=await fetch(r("/api/payments?".concat(i.toString())),{cache:"no-store"});if(!l.ok)throw Error("Nepodařilo se nač\xedst platby (".concat(l.status,")"));let s=await l.json();return{items:(null==s?void 0:s.items)||(null==s?void 0:s.rows)||(null==s?void 0:s.data)||[],total:null!==(a=null!==(e=null==s?void 0:s.total)&&void 0!==e?e:null==s?void 0:s.count)&&void 0!==a?a:null,page:null!==(n=null==s?void 0:s.page)&&void 0!==n?n:null,per_page:null!==(o=null==s?void 0:s.per_page)&&void 0!==o?o:null}}async function N(){var t,e,a;let n=await fetch(r("/api/payments/summary"),{cache:"no-store"});if(!n.ok)return null;let o=await n.json();return{count:null!==(t=null==o?void 0:o.count)&&void 0!==t?t:null,total_amount:null!==(a=null!==(e=null==o?void 0:o.total_amount)&&void 0!==e?e:null==o?void 0:o.totalAmount)&&void 0!==a?a:null}}async function S(t){let e=new URLSearchParams;Object.entries(t).forEach(t=>{let[a,n]=t;n&&e.set(a,n)});let a=await fetch(r("/api/sold?".concat(e.toString())),{cache:"no-store"});if(!a.ok)throw Error("Nepodařilo se nač\xedst prodan\xe9 (".concat(a.status,")"));let n=await a.json();return{rows:(null==n?void 0:n.rows)||(null==n?void 0:n.items)||(null==n?void 0:n.data)||[],summary:(null==n?void 0:n.summary)||null}}function P(t,e){let a=new URLSearchParams;return Object.entries(e).forEach(t=>{let[e,n]=t;n&&a.set(e,n)}),r("/api/sold/export/".concat(t,"?").concat(a.toString()))}function O(t){return r("/api/sold/".concat(t,"/invoice-preview"))}async function T(t){let e=await fetch(r("/api/sold/".concat(t,"/invoice-send")),{method:"POST"});if(!e.ok){let t="Odesl\xe1n\xed faktury selhalo (".concat(e.status,")");try{let a=await e.json();t=(null==a?void 0:a.error)||(null==a?void 0:a.message)||(null==a?void 0:a.detail)||t}catch(t){}throw Error(t)}}},7138:function(t,e,a){"use strict";a.d(e,{default:function(){return o.a}});var n=a(231),o=a.n(n)},6463:function(t,e,a){"use strict";var n=a(1169);a.o(n,"useParams")&&a.d(e,{useParams:function(){return n.useParams}}),a.o(n,"usePathname")&&a.d(e,{usePathname:function(){return n.usePathname}}),a.o(n,"useRouter")&&a.d(e,{useRouter:function(){return n.useRouter}}),a.o(n,"useSearchParams")&&a.d(e,{useSearchParams:function(){return n.useSearchParams}})}},function(t){t.O(0,[231,971,23,744],function(){return t(t.s=1909)}),_N_E=t.O()}]);