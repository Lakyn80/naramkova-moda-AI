(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[565],{3920:function(t,e,a){Promise.resolve().then(a.bind(a,8142))},8142:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return l}});var o=a(7437),n=a(2265),r=a(6264),i=a(3480);function l(){let[t,e]=(0,n.useState)([]),[a,l]=(0,n.useState)(!0),[s,c]=(0,n.useState)(null);(0,n.useEffect)(()=>{let t=!0;return l(!0),c(null),(0,r.t2)().then(a=>{t&&e(a||[])}).catch(e=>{t&&c(e.message||"Nepodařilo se nač\xedst produkty")}).finally(()=>{t&&l(!1)}),()=>{t=!1}},[]);let u=[];return t.forEach(t=>{var e,a;let o=(0,i.X)(t.image_url||t.image);o&&u.push({productId:t.id,productName:t.name||"—",url:o}),(null!==(a=null!==(e=t.media_items)&&void 0!==e?e:t.media)&&void 0!==a?a:[]).forEach(e=>{let a=(0,i.X)(e.url||e.filename);a&&u.push({productId:t.id,productName:t.name||"—",url:a,id:e.id})})}),(0,o.jsxs)("div",{className:"space-y-4",children:[(0,o.jsx)("h2",{className:"text-2xl font-semibold",children:"M\xe9dia"}),(0,o.jsx)("p",{className:"text-sm text-gray-600",children:"Přehled obr\xe1zků a m\xe9di\xed napojen\xfdch na produkty. Smaz\xe1n\xed m\xe9dia zat\xedm nelze prov\xe9st z t\xe9to str\xe1nky."}),a&&(0,o.jsx)("div",{className:"rounded-md border border-gray-200 bg-white p-6 text-sm text-gray-600",children:"Nač\xedt\xe1n\xed..."}),s&&(0,o.jsx)("div",{className:"rounded-md border border-red-200 bg-red-50 p-4 text-sm text-red-600",children:s}),!a&&!s&&(0,o.jsx)("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:u.map((t,e)=>{var a;return(0,o.jsxs)("div",{className:"rounded-lg border border-gray-200 bg-white p-3 shadow-sm",children:[(0,o.jsx)("div",{className:"mb-2 h-32 overflow-hidden rounded bg-gray-100",children:(0,o.jsx)("img",{src:t.url,alt:t.productName,className:"h-full w-full object-cover",onError:t=>{t.target.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100'%3E%3Crect fill='%23ddd' width='100' height='100'/%3E%3Ctext fill='%23999' x='50%25' y='50%25' dominant-baseline='middle' text-anchor='middle' font-size='12'%3EError%3C/text%3E%3C/svg%3E"}})}),(0,o.jsx)("p",{className:"truncate text-xs font-medium text-gray-700",children:t.productName}),(0,o.jsxs)("p",{className:"truncate text-xs text-gray-500",children:["Produkt #",t.productId]})]},t.productId+"-"+(null!==(a=t.id)&&void 0!==a?a:e))})}),!a&&!s&&0===u.length&&(0,o.jsx)("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-8 text-center text-gray-500",children:"Ž\xe1dn\xe1 m\xe9dia"})]})}},6264:function(t,e,a){"use strict";a.d(e,{$Y:function(){return S},Bd:function(){return P},Dj:function(){return w},Hy:function(){return x},Ir:function(){return m},MX:function(){return l},QX:function(){return T},RA:function(){return v},SN:function(){return O},TE:function(){return y},c0:function(){return N},cQ:function(){return b},cW:function(){return k},f8:function(){return r},gF:function(){return E},h6:function(){return j},jn:function(){return s},k4:function(){return u},nM:function(){return p},pE:function(){return c},ry:function(){return f},t2:function(){return i},uu:function(){return h},yr:function(){return d},zm:function(){return g}});let o="/api",n=o.includes("backend")?"/api":o;function r(t){let e=t.startsWith("/")?t:"/".concat(t);return"/api"===n?e.startsWith("/api/")||"/api"===e?e:"/api".concat(e):"".concat(n).concat(e)}async function i(){let t=await fetch(r("/api/products/"),{cache:"no-store"});if(!t.ok)throw Error("Nepodařilo se nač\xedst produkty (".concat(t.status,")"));return await t.json()}async function l(t){let e=await fetch(r("/api/products/".concat(t)),{cache:"no-store"});if(!e.ok)throw Error("Nepodařilo se nač\xedst produkt (".concat(e.status,")"));return await e.json()}async function s(t){let e=await fetch(r("/api/categories/".concat(t)),{cache:"no-store"});if(!e.ok)throw Error("Nepodařilo se nač\xedst kategorii (".concat(e.status,")"));return await e.json()}async function c(){let t=await fetch(r("/api/categories/"),{cache:"no-store"});if(!t.ok)throw Error("Nepodařilo se nač\xedst kategorie (".concat(t.status,")"));return await t.json()}async function u(t){let e=await fetch(r("/api/categories/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){let t="Nepodařilo se vytvořit kategorii (".concat(e.status,")");try{let a=await e.json();t=(null==a?void 0:a.error)||(null==a?void 0:a.message)||(null==a?void 0:a.detail)||t}catch(t){}throw Error(t)}return await e.json()}async function d(t,e){let a=await fetch(r("/api/categories/".concat(t)),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok){let t="Nepodařilo se uložit kategorii (".concat(a.status,")");try{let e=await a.json();t=(null==e?void 0:e.error)||(null==e?void 0:e.message)||(null==e?void 0:e.detail)||t}catch(t){}throw Error(t)}return await a.json()}async function h(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=await fetch(r(e?"/api/categories/".concat(t,"?force=true"):"/api/categories/".concat(t)),{method:"DELETE"});if(!a.ok){let t="Nepodařilo se smazat kategorii (".concat(a.status,")");try{let e=await a.json();t=(null==e?void 0:e.error)||(null==e?void 0:e.message)||(null==e?void 0:e.detail)||t}catch(t){}throw Error(t)}}async function f(t){let e=await fetch(r("/api/products/"),{method:"POST",body:t});if(!e.ok){let t="Nepodařilo se vytvořit produkt (".concat(e.status,")");try{let a=await e.json();t=(null==a?void 0:a.error)||(null==a?void 0:a.message)||(null==a?void 0:a.detail)||t}catch(t){}throw Error(t)}return await e.json()}async function p(t,e){let a=await fetch(r("/api/products/".concat(t)),{method:"PUT",body:e});if(!a.ok){let t="Nepodařilo se uložit produkt (".concat(a.status,")");try{let e=await a.json();t=(null==e?void 0:e.error)||(null==e?void 0:e.message)||(null==e?void 0:e.detail)||t}catch(t){}throw Error(t)}return await a.json()}async function m(t){let e=await fetch(r("/api/products/".concat(t)),{method:"DELETE"});if(!e.ok){let t="Nepodařilo se smazat produkt (".concat(e.status,")");try{let a=await e.json();t=(null==a?void 0:a.error)||(null==a?void 0:a.message)||(null==a?void 0:a.detail)||t}catch(t){}throw Error(t)}}async function v(t){let e=await fetch(r("/api/ai/vision/analyze"),{method:"POST",body:t});if(!e.ok){let t="Anal\xfdza obr\xe1zku selhala (".concat(e.status,")");try{let a=await e.json();t=(null==a?void 0:a.error)||(null==a?void 0:a.message)||(null==a?void 0:a.detail)||t}catch(t){}throw Error(t)}return await e.json()}async function y(t){let e=await fetch(r("/api/ai/deepseek/generate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({context:t})});if(!e.ok){let t="Generov\xe1n\xed popisu selhalo (".concat(e.status,")");try{let a=await e.json();t=(null==a?void 0:a.error)||(null==a?void 0:a.message)||(null==a?void 0:a.detail)||t}catch(t){}throw Error(t)}return await e.json()}async function w(t){await fetch(r("/api/ai/rag/ingest"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}async function g(t){let e=await fetch(r("/api/ai/rag/search"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){let t="Vyhled\xe1v\xe1n\xed v RAG selhalo (".concat(e.status,")");try{let a=await e.json();t=(null==a?void 0:a.error)||(null==a?void 0:a.message)||(null==a?void 0:a.detail)||t}catch(t){}throw Error(t)}return e.json()}async function j(t){let e=await fetch(r("/api/media/".concat(t)),{method:"DELETE"});if(!e.ok){let t="Smaz\xe1n\xed m\xe9dia selhalo (".concat(e.status,")");try{let a=await e.json();t=(null==a?void 0:a.error)||(null==a?void 0:a.message)||(null==a?void 0:a.detail)||t}catch(t){}throw Error(t)}}async function k(t){let e=await fetch(r("/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){let t="Přihl\xe1šen\xed selhalo (".concat(e.status,")");try{let a=await e.json();t=(null==a?void 0:a.error)||(null==a?void 0:a.message)||(null==a?void 0:a.detail)||t}catch(t){}throw Error(t)}}async function E(t){let e=await fetch(r("/api/auth/forgot"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){let t="Odesl\xe1n\xed odkazu selhalo (".concat(e.status,")");try{let a=await e.json();t=(null==a?void 0:a.error)||(null==a?void 0:a.message)||(null==a?void 0:a.detail)||t}catch(t){}throw Error(t)}}async function N(t){let e=await fetch(r("/api/auth/reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok){let t="Reset hesla selhal (".concat(e.status,")");try{let a=await e.json();t=(null==a?void 0:a.error)||(null==a?void 0:a.message)||(null==a?void 0:a.detail)||t}catch(t){}throw Error(t)}}async function b(t){var e,a,o,n;let i=new URLSearchParams;t.vs&&i.set("vs",t.vs),t.status&&"all"!==t.status&&i.set("status",t.status),t.limit&&i.set("per_page",String(t.limit));let l=await fetch(r("/api/payments?".concat(i.toString())),{cache:"no-store"});if(!l.ok)throw Error("Nepodařilo se nač\xedst platby (".concat(l.status,")"));let s=await l.json();return{items:(null==s?void 0:s.items)||(null==s?void 0:s.rows)||(null==s?void 0:s.data)||[],total:null!==(a=null!==(e=null==s?void 0:s.total)&&void 0!==e?e:null==s?void 0:s.count)&&void 0!==a?a:null,page:null!==(o=null==s?void 0:s.page)&&void 0!==o?o:null,per_page:null!==(n=null==s?void 0:s.per_page)&&void 0!==n?n:null}}async function x(){var t,e,a;let o=await fetch(r("/api/payments/summary"),{cache:"no-store"});if(!o.ok)return null;let n=await o.json();return{count:null!==(t=null==n?void 0:n.count)&&void 0!==t?t:null,total_amount:null!==(a=null!==(e=null==n?void 0:n.total_amount)&&void 0!==e?e:null==n?void 0:n.totalAmount)&&void 0!==a?a:null}}async function S(t){let e=new URLSearchParams;Object.entries(t).forEach(t=>{let[a,o]=t;o&&e.set(a,o)});let a=await fetch(r("/api/sold?".concat(e.toString())),{cache:"no-store"});if(!a.ok)throw Error("Nepodařilo se nač\xedst prodan\xe9 (".concat(a.status,")"));let o=await a.json();return{rows:(null==o?void 0:o.rows)||(null==o?void 0:o.items)||(null==o?void 0:o.data)||[],summary:(null==o?void 0:o.summary)||null}}function O(t,e){let a=new URLSearchParams;return Object.entries(e).forEach(t=>{let[e,o]=t;o&&a.set(e,o)}),r("/api/sold/export/".concat(t,"?").concat(a.toString()))}function T(t){return r("/api/sold/".concat(t,"/invoice-preview"))}async function P(t){let e=await fetch(r("/api/sold/".concat(t,"/invoice-send")),{method:"POST"});if(!e.ok){let t="Odesl\xe1n\xed faktury selhalo (".concat(e.status,")");try{let a=await e.json();t=(null==a?void 0:a.error)||(null==a?void 0:a.message)||(null==a?void 0:a.detail)||t}catch(t){}throw Error(t)}}},3480:function(t,e,a){"use strict";function o(t){return t?t.startsWith("http://")||t.startsWith("https://")||t.startsWith("/static/")?t:"/static/uploads/".concat(t):null}a.d(e,{X:function(){return o}})}},function(t){t.O(0,[971,23,744],function(){return t(t.s=3920)}),_N_E=t.O()}]);