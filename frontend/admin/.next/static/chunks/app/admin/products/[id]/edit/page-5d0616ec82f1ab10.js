(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[435],{6313:function(e,t,a){Promise.resolve().then(a.bind(a,2102))},2102:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return d}});var r=a(7437),n=a(2265),s=a(7138),i=a(6463),o=a(6264),l=a(3480);function d(){let e=(0,i.useParams)(),t=(0,i.useRouter)(),a=Number(Array.isArray(null==e?void 0:e.id)?e.id[0]:null==e?void 0:e.id),[d,c]=(0,n.useState)([]),[u,m]=(0,n.useState)(null),[p,h]=(0,n.useState)(!0),[x,f]=(0,n.useState)(!1),[v,g]=(0,n.useState)(null),[y,b]=(0,n.useState)(null),[w,j]=(0,n.useState)({name:"",description:"",price_czk:"",stock:"",category_id:"",wrist_size:""}),[N,k]=(0,n.useState)(null),[_,S]=(0,n.useState)(!1),[E,z]=(0,n.useState)(null),[C,P]=(0,n.useState)([]),[O,T]=(0,n.useState)([]),[D,R]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if(!a)return;let e=!0;return h(!0),g(null),Promise.all([(0,o.MX)(a),(0,o.pE)()]).then(t=>{var a;let[r,n]=t;e&&(m(r),c(n),j({name:r.name||"",description:r.description||"",price_czk:null==(a=r.price)?"":String(a),stock:void 0!==r.stock&&null!==r.stock?String(r.stock):"",category_id:r.category_id?String(r.category_id):"",wrist_size:r.wrist_size||""}),T((r.variants||[]).map(e=>({...e,imageFile:null,extraFiles:[],existingImage:e.image||null,existingExtra:(e.media||[]).map(e=>e.image||"").filter(Boolean)}))))}).catch(t=>{e&&g(t.message||"Nepodařilo se nač\xedst produkt")}).finally(()=>{e&&h(!1)}),()=>{e=!1}},[a]),(0,n.useEffect)(()=>{if(!N){z(null);return}let e=URL.createObjectURL(N);return z(e),()=>URL.revokeObjectURL(e)},[N]);let U=(0,n.useMemo)(()=>d.map(e=>({id:e.id,label:"".concat(e.group||"—"," — ").concat(e.name)})),[d]),F=e=>{let{name:t,value:a}=e.target;j(e=>({...e,[t]:a}))},L=e=>{T(t=>t.filter((t,a)=>a!=e))},I=(e,t)=>{T(a=>a.map((a,r)=>r===e?{...a,...t}:a))},X=async()=>{if(window.confirm("Opravdu smazat tento produkt?")){g(null);try{await (0,o.Ir)(a),t.push("/admin/products")}catch(e){g(e instanceof Error?e.message:"Smaz\xe1n\xed selhalo")}}},A=async e=>{if(window.confirm("Smazat toto m\xe9dium?")){g(null);try{await (0,o.h6)(e),m(t=>{if(!t)return t;let a=(t.media_items||[]).filter(t=>t.id!==e);return{...t,media_items:a}})}catch(e){g(e instanceof Error?e.message:"Smaz\xe1n\xed selhalo")}}},J=()=>{let e=new FormData;return e.append("name",w.name),e.append("description",w.description),e.append("price_czk",w.price_czk),e.append("stock",w.stock),e.append("category_id",w.category_id),e.append("wrist_size",w.wrist_size),_&&e.append("delete_image","1"),N&&e.append("image",N),C.length&&C.forEach(t=>e.append("media",t)),D&&e.append("clear_variants","1"),O.forEach((t,a)=>{var r;e.append("variant_name[]",t.variant_name||""),e.append("variant_wrist_size[]",t.wrist_size||""),e.append("variant_stock[]",String(null!==(r=t.stock)&&void 0!==r?r:0)),e.append("variant_price[]",void 0!==t.price_czk&&null!==t.price_czk?String(t.price_czk):""),e.append("variant_description[]",t.description||"");let n=t.existingImage||"";e.append("variant_image_existing[]",n),t.imageFile?e.append("variant_image[]",t.imageFile):e.append("variant_image[]",new Blob([]),""),(t.existingExtra||[]).forEach(t=>{e.append("variant_image_existing_multi_".concat(a,"[]"),t)}),(t.extraFiles||[]).forEach(t=>{e.append("variant_image_multi_".concat(a,"[]"),t)})}),e},W=async e=>{if(e.preventDefault(),a){f(!0),g(null),b(null);try{let e=J(),t=await (0,o.nM)(a,e);m(t),b("Produkt byl uložen."),R(!1)}catch(e){g(e instanceof Error?e.message:"Uložen\xed selhalo")}finally{f(!1)}}};return p?(0,r.jsx)("div",{className:"rounded-md border border-gray-200 bg-white p-6 text-sm text-gray-600",children:"Nač\xedt\xe1n\xed..."}):u?(0,r.jsx)("main",{className:"min-h-screen bg-gray-50 text-gray-900",children:(0,r.jsxs)("div",{className:"mx-auto max-w-5xl px-6 py-10",children:[(0,r.jsxs)("div",{className:"mb-6 flex flex-wrap items-center justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold",children:"✏️ Upravit produkt"}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["ID #",u.id]})]}),(0,r.jsx)(s.default,{href:"/admin/products",className:"text-sm text-gray-600 underline",children:"Zpět na seznam"})]}),v&&(0,r.jsx)("div",{className:"mb-4 rounded-md border border-red-200 bg-red-50 p-4 text-sm text-red-600",children:v}),y&&(0,r.jsx)("div",{className:"mb-4 rounded-md border border-emerald-200 bg-emerald-50 p-4 text-sm text-emerald-700",children:y}),(0,r.jsxs)("form",{onSubmit:W,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"mb-1 block text-sm font-medium",children:"N\xe1zev"}),(0,r.jsx)("input",{type:"text",name:"name",value:w.name,onChange:F,required:!0,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"mb-1 block text-sm font-medium",children:"Kategorie"}),(0,r.jsxs)("select",{name:"category_id",value:w.category_id,onChange:F,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm",children:[(0,r.jsx)("option",{value:"",children:"— Vyber kategorii —"}),U.map(e=>(0,r.jsx)("option",{value:String(e.id),children:e.label},e.id))]})]})]}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("label",{className:"mb-1 block text-sm font-medium",children:"Popis"}),(0,r.jsx)("textarea",{name:"description",value:w.description,onChange:F,rows:4,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm"})]}),(0,r.jsxs)("div",{className:"mt-4 grid gap-4 md:grid-cols-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"mb-1 block text-sm font-medium",children:"Cena (Kč)"}),(0,r.jsx)("input",{type:"number",name:"price_czk",value:w.price_czk,onChange:F,step:"0.01",required:!0,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"mb-1 block text-sm font-medium",children:"Sklad"}),(0,r.jsx)("input",{type:"number",name:"stock",value:w.stock,onChange:F,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"mb-1 block text-sm font-medium",children:"Obvod / velikost"}),(0,r.jsx)("input",{type:"text",name:"wrist_size",value:w.wrist_size,onChange:F,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm"})]})]})]}),(0,r.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[(0,r.jsx)("h2",{className:"text-sm font-semibold text-gray-700",children:"\xdavodn\xed obr\xe1zek"}),u.image_url&&!_&&(0,r.jsxs)("div",{className:"mt-3 flex items-center gap-4",children:[(0,r.jsx)("div",{className:"h-20 w-20 overflow-hidden rounded-lg shadow",children:(0,r.jsx)("img",{src:(0,l.X)(u.image_url)||void 0,alt:"preview",className:"h-full w-full object-cover"})}),(0,r.jsx)("button",{type:"button",onClick:()=>S(!0),className:"rounded-md border border-red-200 px-3 py-1 text-xs text-red-700",children:"\uD83D\uDDD1️ Smazat \xfavodn\xed fotku"})]}),_&&(0,r.jsx)("div",{className:"mt-3 text-xs text-red-600",children:"\xdavodn\xed obr\xe1zek bude po uložen\xed smaz\xe1n."}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;return k((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)}}),E&&(0,r.jsx)("div",{className:"mt-3 h-20 w-20 overflow-hidden rounded-lg shadow",children:(0,r.jsx)("img",{src:E,alt:"preview",className:"h-full w-full object-cover"})})]})]}),(0,r.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[(0,r.jsx)("h2",{className:"text-sm font-semibold text-gray-700",children:"Dalš\xed m\xe9dia"}),(0,r.jsx)("div",{className:"mt-3 flex flex-wrap gap-3",children:(u.media_items||[]).map(e=>{var t;return(0,r.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,r.jsx)("div",{className:"h-20 w-20 overflow-hidden rounded-lg bg-gray-100 shadow",children:(null===(t=e.media_type)||void 0===t?void 0:t.startsWith("video"))?(0,r.jsx)("video",{src:(0,l.X)(e.url)||void 0,className:"h-full w-full object-cover",muted:!0}):(0,r.jsx)("img",{src:(0,l.X)(e.url)||void 0,alt:"media",className:"h-full w-full object-cover"})}),e.id&&(0,r.jsx)("button",{type:"button",onClick:()=>A(e.id),className:"rounded-md border border-red-200 px-2 py-1 text-xs text-red-700",children:"Smazat"})]},e.id)})}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)("input",{type:"file",multiple:!0,accept:"image/*,video/*",onChange:e=>P(Array.from(e.target.files||[]))})})]}),(0,r.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,r.jsx)("h2",{className:"text-sm font-semibold text-gray-700",children:"Varianty"}),(0,r.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,r.jsx)("button",{type:"button",onClick:()=>{T(e=>[...e,{variant_name:"",wrist_size:"",description:"",price_czk:null,stock:0,image:null,image_url:null,media:[],imageFile:null,extraFiles:[],existingImage:null,existingExtra:[]}])},className:"rounded-md border border-gray-300 px-3 py-1 text-xs",children:"+ Přidat variantu"}),(0,r.jsx)("button",{type:"button",onClick:()=>{T([]),R(!0)},className:"rounded-md border border-red-200 px-3 py-1 text-xs text-red-700",children:"Vymazat všechny varianty"})]})]}),0===O.length&&(0,r.jsx)("div",{className:"mt-4 text-sm text-gray-500",children:"Ž\xe1dn\xe9 varianty."}),(0,r.jsx)("div",{className:"mt-4 space-y-4",children:O.map((e,t)=>{var a,n;return(0,r.jsxs)("div",{className:"rounded-lg border border-gray-200 p-4",children:[(0,r.jsxs)("div",{className:"grid gap-3 md:grid-cols-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-500",children:"N\xe1zev"}),(0,r.jsx)("input",{type:"text",value:e.variant_name||"",onChange:e=>I(t,{variant_name:e.target.value}),className:"w-full rounded-md border border-gray-300 px-2 py-1 text-sm"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-500",children:"Obvod"}),(0,r.jsx)("input",{type:"text",value:e.wrist_size||"",onChange:e=>I(t,{wrist_size:e.target.value}),className:"w-full rounded-md border border-gray-300 px-2 py-1 text-sm"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-500",children:"Cena"}),(0,r.jsx)("input",{type:"number",step:"0.01",value:null!==(a=e.price_czk)&&void 0!==a?a:"",onChange:e=>I(t,{price_czk:e.target.value?Number(e.target.value):null}),className:"w-full rounded-md border border-gray-300 px-2 py-1 text-sm"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-500",children:"Sklad"}),(0,r.jsx)("input",{type:"number",value:null!==(n=e.stock)&&void 0!==n?n:0,onChange:e=>I(t,{stock:Number(e.target.value)}),className:"w-full rounded-md border border-gray-300 px-2 py-1 text-sm"})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsx)("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-500",children:"Popis"}),(0,r.jsx)("textarea",{value:e.description||"",onChange:e=>I(t,{description:e.target.value}),rows:2,className:"w-full rounded-md border border-gray-300 px-2 py-1 text-sm"})]})]}),(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsx)("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-500",children:"Obr\xe1zek varianty"}),e.existingImage&&(0,r.jsxs)("div",{className:"mb-2 flex items-center gap-3",children:[(0,r.jsx)("div",{className:"h-16 w-16 overflow-hidden rounded shadow",children:(0,r.jsx)("img",{src:(0,l.X)(e.existingImage)||void 0,alt:"variant",className:"h-full w-full object-cover"})}),(0,r.jsx)("button",{type:"button",onClick:()=>I(t,{existingImage:""}),className:"rounded-md border border-red-200 px-2 py-1 text-xs text-red-700",children:"Smazat"})]}),(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var a;return I(t,{imageFile:(null===(a=e.target.files)||void 0===a?void 0:a[0])||null})}})]}),(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsx)("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-500",children:"Dalš\xed fotky"}),(0,r.jsx)("div",{className:"mb-2 flex flex-wrap gap-2",children:(e.existingExtra||[]).map(a=>(0,r.jsxs)("div",{className:"flex flex-col items-center",children:[(0,r.jsx)("div",{className:"h-14 w-14 overflow-hidden rounded bg-gray-100",children:(0,r.jsx)("img",{src:(0,l.X)(a)||void 0,alt:"extra",className:"h-full w-full object-cover"})}),(0,r.jsx)("button",{type:"button",onClick:()=>I(t,{existingExtra:(e.existingExtra||[]).filter(e=>e!==a)}),className:"mt-1 text-xs text-red-600",children:"odebrat"})]},a))}),(0,r.jsx)("input",{type:"file",multiple:!0,accept:"image/*",onChange:e=>I(t,{extraFiles:Array.from(e.target.files||[])})})]}),(0,r.jsx)("div",{className:"mt-3 text-right",children:(0,r.jsx)("button",{type:"button",onClick:()=>L(t),className:"rounded-md border border-red-200 px-3 py-1 text-xs text-red-700",children:"Odstranit variantu"})})]},t)})})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,r.jsx)("button",{type:"submit",disabled:x,className:"rounded-md bg-gray-900 px-4 py-2 text-sm font-semibold text-white disabled:opacity-60",children:x?"Ukl\xe1d\xe1m...":"Uložit"}),(0,r.jsx)("button",{type:"button",onClick:X,className:"rounded-md border border-red-200 px-4 py-2 text-sm text-red-700",children:"\uD83D\uDDD1️ Smazat produkt"})]})]})]})}):(0,r.jsx)("div",{className:"rounded-md border border-gray-200 bg-white p-6 text-sm text-gray-600",children:"Produkt nenalezen."})}},6264:function(e,t,a){"use strict";a.d(t,{$Y:function(){return S},Bd:function(){return C},Dj:function(){return g},Hy:function(){return _},Ir:function(){return x},MX:function(){return o},QX:function(){return z},RA:function(){return f},SN:function(){return E},TE:function(){return v},c0:function(){return N},cQ:function(){return k},cW:function(){return w},f8:function(){return s},gF:function(){return j},h6:function(){return b},jn:function(){return l},k4:function(){return c},nM:function(){return h},pE:function(){return d},ry:function(){return p},t2:function(){return i},uu:function(){return m},yr:function(){return u},zm:function(){return y}});let r="/api",n=r.includes("backend")?"/api":r;function s(e){let t=e.startsWith("/")?e:"/".concat(e);return"/api"===n?t.startsWith("/api/")||"/api"===t?t:"/api".concat(t):"".concat(n).concat(t)}async function i(){let e=await fetch(s("/api/products/"),{cache:"no-store"});if(!e.ok)throw Error("Nepodařilo se nač\xedst produkty (".concat(e.status,")"));return await e.json()}async function o(e){let t=await fetch(s("/api/products/".concat(e)),{cache:"no-store"});if(!t.ok)throw Error("Nepodařilo se nač\xedst produkt (".concat(t.status,")"));return await t.json()}async function l(e){let t=await fetch(s("/api/categories/".concat(e)),{cache:"no-store"});if(!t.ok)throw Error("Nepodařilo se nač\xedst kategorii (".concat(t.status,")"));return await t.json()}async function d(){let e=await fetch(s("/api/categories/"),{cache:"no-store"});if(!e.ok)throw Error("Nepodařilo se nač\xedst kategorie (".concat(e.status,")"));return await e.json()}async function c(e){let t=await fetch(s("/api/categories/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e="Nepodařilo se vytvořit kategorii (".concat(t.status,")");try{let a=await t.json();e=(null==a?void 0:a.error)||(null==a?void 0:a.message)||(null==a?void 0:a.detail)||e}catch(e){}throw Error(e)}return await t.json()}async function u(e,t){let a=await fetch(s("/api/categories/".concat(e)),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok){let e="Nepodařilo se uložit kategorii (".concat(a.status,")");try{let t=await a.json();e=(null==t?void 0:t.error)||(null==t?void 0:t.message)||(null==t?void 0:t.detail)||e}catch(e){}throw Error(e)}return await a.json()}async function m(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=await fetch(s(t?"/api/categories/".concat(e,"?force=true"):"/api/categories/".concat(e)),{method:"DELETE"});if(!a.ok){let e="Nepodařilo se smazat kategorii (".concat(a.status,")");try{let t=await a.json();e=(null==t?void 0:t.error)||(null==t?void 0:t.message)||(null==t?void 0:t.detail)||e}catch(e){}throw Error(e)}}async function p(e){let t=await fetch(s("/api/products/"),{method:"POST",body:e});if(!t.ok){let e="Nepodařilo se vytvořit produkt (".concat(t.status,")");try{let a=await t.json();e=(null==a?void 0:a.error)||(null==a?void 0:a.message)||(null==a?void 0:a.detail)||e}catch(e){}throw Error(e)}return await t.json()}async function h(e,t){let a=await fetch(s("/api/products/".concat(e)),{method:"PUT",body:t});if(!a.ok){let e="Nepodařilo se uložit produkt (".concat(a.status,")");try{let t=await a.json();e=(null==t?void 0:t.error)||(null==t?void 0:t.message)||(null==t?void 0:t.detail)||e}catch(e){}throw Error(e)}return await a.json()}async function x(e){let t=await fetch(s("/api/products/".concat(e)),{method:"DELETE"});if(!t.ok){let e="Nepodařilo se smazat produkt (".concat(t.status,")");try{let a=await t.json();e=(null==a?void 0:a.error)||(null==a?void 0:a.message)||(null==a?void 0:a.detail)||e}catch(e){}throw Error(e)}}async function f(e){let t=await fetch(s("/api/ai/vision/analyze"),{method:"POST",body:e});if(!t.ok){let e="Anal\xfdza obr\xe1zku selhala (".concat(t.status,")");try{let a=await t.json();e=(null==a?void 0:a.error)||(null==a?void 0:a.message)||(null==a?void 0:a.detail)||e}catch(e){}throw Error(e)}return await t.json()}async function v(e){let t=await fetch(s("/api/ai/deepseek/generate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({context:e})});if(!t.ok){let e="Generov\xe1n\xed popisu selhalo (".concat(t.status,")");try{let a=await t.json();e=(null==a?void 0:a.error)||(null==a?void 0:a.message)||(null==a?void 0:a.detail)||e}catch(e){}throw Error(e)}return await t.json()}async function g(e){await fetch(s("/api/ai/rag/ingest"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}async function y(e){let t=await fetch(s("/api/ai/rag/search"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e="Vyhled\xe1v\xe1n\xed v RAG selhalo (".concat(t.status,")");try{let a=await t.json();e=(null==a?void 0:a.error)||(null==a?void 0:a.message)||(null==a?void 0:a.detail)||e}catch(e){}throw Error(e)}return t.json()}async function b(e){let t=await fetch(s("/api/media/".concat(e)),{method:"DELETE"});if(!t.ok){let e="Smaz\xe1n\xed m\xe9dia selhalo (".concat(t.status,")");try{let a=await t.json();e=(null==a?void 0:a.error)||(null==a?void 0:a.message)||(null==a?void 0:a.detail)||e}catch(e){}throw Error(e)}}async function w(e){let t=await fetch(s("/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e="Přihl\xe1šen\xed selhalo (".concat(t.status,")");try{let a=await t.json();e=(null==a?void 0:a.error)||(null==a?void 0:a.message)||(null==a?void 0:a.detail)||e}catch(e){}throw Error(e)}}async function j(e){let t=await fetch(s("/api/auth/forgot"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e="Odesl\xe1n\xed odkazu selhalo (".concat(t.status,")");try{let a=await t.json();e=(null==a?void 0:a.error)||(null==a?void 0:a.message)||(null==a?void 0:a.detail)||e}catch(e){}throw Error(e)}}async function N(e){let t=await fetch(s("/api/auth/reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e="Reset hesla selhal (".concat(t.status,")");try{let a=await t.json();e=(null==a?void 0:a.error)||(null==a?void 0:a.message)||(null==a?void 0:a.detail)||e}catch(e){}throw Error(e)}}async function k(e){var t,a,r,n;let i=new URLSearchParams;e.vs&&i.set("vs",e.vs),e.status&&"all"!==e.status&&i.set("status",e.status),e.limit&&i.set("per_page",String(e.limit));let o=await fetch(s("/api/payments?".concat(i.toString())),{cache:"no-store"});if(!o.ok)throw Error("Nepodařilo se nač\xedst platby (".concat(o.status,")"));let l=await o.json();return{items:(null==l?void 0:l.items)||(null==l?void 0:l.rows)||(null==l?void 0:l.data)||[],total:null!==(a=null!==(t=null==l?void 0:l.total)&&void 0!==t?t:null==l?void 0:l.count)&&void 0!==a?a:null,page:null!==(r=null==l?void 0:l.page)&&void 0!==r?r:null,per_page:null!==(n=null==l?void 0:l.per_page)&&void 0!==n?n:null}}async function _(){var e,t,a;let r=await fetch(s("/api/payments/summary"),{cache:"no-store"});if(!r.ok)return null;let n=await r.json();return{count:null!==(e=null==n?void 0:n.count)&&void 0!==e?e:null,total_amount:null!==(a=null!==(t=null==n?void 0:n.total_amount)&&void 0!==t?t:null==n?void 0:n.totalAmount)&&void 0!==a?a:null}}async function S(e){let t=new URLSearchParams;Object.entries(e).forEach(e=>{let[a,r]=e;r&&t.set(a,r)});let a=await fetch(s("/api/sold?".concat(t.toString())),{cache:"no-store"});if(!a.ok)throw Error("Nepodařilo se nač\xedst prodan\xe9 (".concat(a.status,")"));let r=await a.json();return{rows:(null==r?void 0:r.rows)||(null==r?void 0:r.items)||(null==r?void 0:r.data)||[],summary:(null==r?void 0:r.summary)||null}}function E(e,t){let a=new URLSearchParams;return Object.entries(t).forEach(e=>{let[t,r]=e;r&&a.set(t,r)}),s("/api/sold/export/".concat(e,"?").concat(a.toString()))}function z(e){return s("/api/sold/".concat(e,"/invoice-preview"))}async function C(e){let t=await fetch(s("/api/sold/".concat(e,"/invoice-send")),{method:"POST"});if(!t.ok){let e="Odesl\xe1n\xed faktury selhalo (".concat(t.status,")");try{let a=await t.json();e=(null==a?void 0:a.error)||(null==a?void 0:a.message)||(null==a?void 0:a.detail)||e}catch(e){}throw Error(e)}}},3480:function(e,t,a){"use strict";function r(e){return e?e.startsWith("http://")||e.startsWith("https://")||e.startsWith("/static/")?e:"/static/uploads/".concat(e):null}a.d(t,{X:function(){return r}})},7138:function(e,t,a){"use strict";a.d(t,{default:function(){return n.a}});var r=a(231),n=a.n(r)},6463:function(e,t,a){"use strict";var r=a(1169);a.o(r,"useParams")&&a.d(t,{useParams:function(){return r.useParams}}),a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})}},function(e){e.O(0,[231,971,23,744],function(){return e(e.s=6313)}),_N_E=e.O()}]);