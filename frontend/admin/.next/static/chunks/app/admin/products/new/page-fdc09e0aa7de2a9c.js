(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[573],{8065:function(e,t,r){Promise.resolve().then(r.bind(r,8407))},8407:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return s}});var a=r(7437),n=r(2265),i=r(6463),o=r(6264);function s(){let e=(0,i.useRouter)(),[t,r]=(0,n.useState)([]),[s,l]=(0,n.useState)(!0),[c,d]=(0,n.useState)(!1),[u,p]=(0,n.useState)(null),[m,h]=(0,n.useState)(null),[g,y]=(0,n.useState)(!1),[f,b]=(0,n.useState)(null),[v,x]=(0,n.useState)(!1),[j,w]=(0,n.useState)(!1),[k,N]=(0,n.useState)(!1),[_,S]=(0,n.useState)(!1),[E,z]=(0,n.useState)(!1),[C,O]=(0,n.useState)(!1),[P,A]=(0,n.useState)({name:"",description:"",price_czk:"",stock:"1",category_id:"",wrist_size:"",image:null}),[T,R]=(0,n.useState)([]),[I,L]=(0,n.useState)([]),[U,J]=(0,n.useState)(null),[D,G]=(0,n.useState)([]);(0,n.useEffect)(()=>{let e=!0;return l(!0),(0,o.pE)().then(t=>{e&&r(t)}).catch(t=>{e&&p(t.message||"Nepodařilo se nač\xedst kategorie")}).finally(()=>{e&&l(!1)}),()=>{e=!1}},[]),(0,n.useEffect)(()=>{if(!P.image){J(null);return}let e=URL.createObjectURL(P.image);return J(e),()=>URL.revokeObjectURL(e)},[P.image]),(0,n.useEffect)(()=>{if(!T.length){G([]);return}let e=T.map(e=>({url:URL.createObjectURL(e),type:e.type}));return G(e),()=>{e.forEach(e=>URL.revokeObjectURL(e.url))}},[T]);let F=(0,n.useMemo)(()=>t.map(e=>({id:e.id,label:"".concat(e.group||"—"," — ").concat(e.name)})),[t]),V=e=>{let{name:t,value:r}=e.target;A(e=>({...e,[t]:r}))},B=e=>{L(t=>t.filter((t,r)=>r!==e))},q=(e,t)=>{L(r=>r.map((r,a)=>a===e?{...r,...t}:r))},K=async t=>{t.preventDefault(),d(!0),p(null),h(null);try{let t=new FormData;t.append("name",P.name),t.append("description",P.description),t.append("price_czk",P.price_czk),t.append("stock",P.stock),t.append("category_id",P.category_id),t.append("wrist_size",P.wrist_size),P.image&&t.append("image",P.image),T.forEach(e=>t.append("media",e)),I.forEach((e,r)=>{var a;t.append("variant_name[]",e.variant_name||""),t.append("variant_wrist_size[]",e.wrist_size||""),t.append("variant_stock[]",String(null!==(a=e.stock)&&void 0!==a?a:0)),t.append("variant_price[]",void 0!==e.price_czk&&null!==e.price_czk?String(e.price_czk):""),t.append("variant_description[]",e.description||""),e.imageFile?t.append("variant_image[]",e.imageFile):t.append("variant_image[]",new Blob([]),""),(e.extraFiles||[]).forEach(e=>{t.append("variant_image_multi_".concat(r,"[]"),e)})}),await (0,o.ry)(t),h("Produkt byl vytvořen."),e.push("/admin/products?created=1")}catch(e){p(e instanceof Error?e.message:"Nepodařilo se vytvořit produkt")}finally{d(!1)}},M=e=>{let t=e.labels||[],r=e.objects||[],a=e.dominant_colors||e.dominantColors||e.colors||[];return[t.length?"labels: ".concat(t.join(", ")):"",a.length?"dominant colors: ".concat(a.join(", ")):"",r.length?"objects: ".concat(r.join(", ")):""].filter(Boolean).join("\n")},W=e=>{if(!e.length)return"";let r=e.map(e=>e.toLowerCase()),a=t.find(e=>{let t=(e.name||"").toLowerCase(),a=(e.slug||"").toLowerCase();return r.some(e=>t.includes(e)||a.includes(e))});return(null==a?void 0:a.name)||""},Z=e=>{let t=[];return t.push("You are generating product data for a handmade shop."),t.push("Return JSON only with keys: name, description, category_slug, price_czk, stock."),t.push("Do not include extra keys or any commentary."),e.productName&&t.push("Product name hint: ".concat(e.productName)),t.push("Image attributes:"),t.push(e.visionText||"No attributes provided."),e.ragExamples&&(t.push("Similar examples (if any):"),t.push(JSON.stringify(e.ragExamples))),t.push("Formatting rules:"),t.push("- description: single plain text, keep tone similar to existing products"),t.push("- category_slug: lowercase slug"),t.push("- price_czk: number"),t.push("- stock: integer"),t.join("\n")},Q=e=>{try{return JSON.parse(e)}catch(a){let t=e.indexOf("{"),r=e.lastIndexOf("}");if(t>=0&&r>t)try{return JSON.parse(e.slice(t,r+1))}catch(e){}return null}},X=async()=>{if(!P.image){b("Vyberte obr\xe1zek produktu.");return}b(null),y(!0);try{var e;let r=new FormData;r.append("image",P.image);let a=await (0,o.RA)(r),n=M(a),i=await (0,o.TE)(n),s=i.long_description||i.description||i.text||i.short_description||"";if(!s)throw Error("AI nevygenerovala popis.");A(e=>({...e,description:s}));let l=a.labels||[],c=a.objects||[],d=a.dominant_colors||a.dominantColors||a.colors||[],u=(null===(e=t.find(e=>String(e.id)===String(P.category_id)))||void 0===e?void 0:e.name)||"";(0,o.Dj)({category:u,attributes:{labels:l,colors:d,objects:c},description:s}).catch(e=>{console.error("RAG ingest failed:",e)})}catch(e){b(e instanceof Error?e.message:"AI generov\xe1n\xed selhalo.")}finally{y(!1)}},Y=async()=>{if(!P.image){b("Vyberte obr\xe1zek produktu.");return}b(null),x(!0);try{var e,r,a;let n=new FormData;n.append("image",P.image);let i=await (0,o.RA)(n),s=i.labels||[],l=i.objects||[],c=i.dominant_colors||i.dominantColors||i.colors||[],d=W(s),u=null;try{u=await (0,o.zm)({category:d,attributes:{labels:s,colors:c,objects:l}})}catch(e){console.error("RAG search failed:",e)}let p=M({labels:s,colors:c,dominant_colors:c,objects:l}),m=Z({visionText:p,productName:P.name||void 0,ragExamples:u}),h=await (0,o.TE)(m),g=h.text||h.description||h.long_description||h.short_description||"",y=Q(g);if(!y)throw Error("AI nevr\xe1tila platn\xfd JSON.");let f=y.name||P.name||"",b=y.description||P.description||"",v=void 0!==y.price_czk?String(y.price_czk):P.price_czk,x=void 0!==y.stock?String(y.stock):P.stock,j=y.category_slug||"",w=(null===(e=t.find(e=>String(e.slug)===String(j)))||void 0===e?void 0:e.id)||(null===(r=t.find(e=>String(e.name)===String(d)))||void 0===r?void 0:r.id)||"";A(e=>({...e,name:f,description:b,price_czk:v,stock:x,category_id:w?String(w):e.category_id}));let k=(null===(a=t.find(e=>String(e.id)===String(w)))||void 0===a?void 0:a.name)||d||"";(0,o.Dj)({category:k,attributes:{labels:s,colors:c,objects:l},description:b}).catch(e=>{console.error("RAG ingest failed:",e)})}catch(e){b(e instanceof Error?e.message:"AI generov\xe1n\xed selhalo.")}finally{x(!1)}},H=(e,t,r,a)=>({category:a,attributes:{labels:e,colors:t,objects:r}}),$=async()=>{var e;let r=(null===(e=t.find(e=>String(e.id)===String(P.category_id)))||void 0===e?void 0:e.name)||"";if(!r)return null;try{return await (0,o.zm)(H([],[],[],r))}catch(e){return console.error("RAG search failed:",e),null}},ee=e=>{let t=Q(e);return t&&"string"==typeof t.description?t.description:e},et=e=>{let t=Q(e);return t&&Array.isArray(t.bullets)?t.bullets.map(e=>String(e)):e.split("\n").map(e=>e.replace(/^[-•*\s]+/,"").trim()).filter(Boolean)},er=e=>{let t=Q(e);if(t&&void 0!==t.price_czk)return String(t.price_czk);let r=e.match(/([0-9]+(?:[.,][0-9]+)?)/);return r?r[1].replace(",","."):""},ea=async()=>{if(!P.description.trim()){b("Nejprve vyplňte popis.");return}b(null),w(!0);try{var e;let r=(null===(e=t.find(e=>String(e.id)===String(P.category_id)))||void 0===e?void 0:e.name)||"",a=await $(),n=["Rewrite the product description in Czech.","Keep the same meaning and structure but improve clarity.","Name: ".concat(P.name),r?"Category: ".concat(r):"",a?"Examples: ".concat(JSON.stringify(a)):"","Return plain text only.","Current description: ".concat(P.description)].filter(Boolean).join("\n"),i=await (0,o.TE)(n),s=i.text||i.description||i.long_description||i.short_description||"",l=ee(s);if(!l)throw Error("AI nevr\xe1tila text.");A(e=>({...e,description:l}))}catch(e){b(e instanceof Error?e.message:"AI generov\xe1n\xed selhalo.")}finally{w(!1)}},en=async()=>{if(!P.description.trim()){b("Nejprve vyplňte popis.");return}b(null),N(!0);try{let e=["Shorten the following Czech product description into a shorter marketing version.","Return plain text only.",P.description].join("\n"),t=await (0,o.TE)(e),r=t.text||t.description||t.long_description||t.short_description||"",a=ee(r);if(!a)throw Error("AI nevr\xe1tila text.");A(e=>({...e,description:a}))}catch(e){b(e instanceof Error?e.message:"AI generov\xe1n\xed selhalo.")}finally{N(!1)}},ei=async()=>{if(!P.description.trim()){b("Nejprve vyplňte popis.");return}b(null),S(!0);try{let e=["Vylepšit marketingov\xfd t\xf3n of the Czech product description.","More emotional and benefit-oriented, no emojis.","Return plain text only.",P.description].join("\n"),t=await (0,o.TE)(e),r=t.text||t.description||t.long_description||t.short_description||"",a=ee(r);if(!a)throw Error("AI nevr\xe1tila text.");A(e=>({...e,description:a}))}catch(e){b(e instanceof Error?e.message:"AI generov\xe1n\xed selhalo.")}finally{S(!1)}},eo=async()=>{if(!P.description.trim()){b("Nejprve vyplňte popis.");return}b(null),z(!0);try{let e=["Generate 3-6 bullet highlights in Czech based on the description.","Return bullet points only, each on a new line.",P.description].join("\n"),t=await (0,o.TE)(e),r=t.text||t.description||t.long_description||t.short_description||"",a=et(r);if(!a.length)throw Error("AI nevr\xe1tila body.");let n=a.map(e=>"• ".concat(e)).join("\n");A(e=>({...e,description:"".concat(e.description,"\n\n").concat(n).trim()}))}catch(e){b(e instanceof Error?e.message:"AI generov\xe1n\xed selhalo.")}finally{z(!1)}},es=async()=>{b(null),O(!0);try{var e;let r=(null===(e=t.find(e=>String(e.id)===String(P.category_id)))||void 0===e?void 0:e.name)||"",a=await $(),n=["Suggest a CZK price as a number for this product.","Return only the numeric price.","Name: ".concat(P.name),r?"Category: ".concat(r):"",P.description?"Description: ".concat(P.description):"",a?"Examples: ".concat(JSON.stringify(a)):""].filter(Boolean).join("\n"),i=await (0,o.TE)(n),s=i.text||i.description||i.long_description||i.short_description||"",l=er(s);if(!l)throw Error("AI nevr\xe1tila cenu.");A(e=>({...e,price_czk:l}))}catch(e){b(e instanceof Error?e.message:"AI generov\xe1n\xed selhalo.")}finally{O(!1)}};return(0,a.jsx)("main",{className:"min-h-screen bg-gray-50 text-gray-900",children:(0,a.jsxs)("div",{className:"mx-auto max-w-5xl px-6 py-10",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold",children:"Přidat produkt"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Nov\xfd produkt v administraci."})]}),s&&(0,a.jsx)("div",{className:"rounded-md border border-gray-200 bg-white p-6 text-sm text-gray-600",children:"Nač\xedt\xe1n\xed kategori\xed..."}),u&&(0,a.jsx)("div",{className:"mb-4 rounded-md border border-red-200 bg-red-50 p-4 text-sm text-red-600",children:u}),f&&(0,a.jsx)("div",{className:"mb-4 rounded-md border border-amber-200 bg-amber-50 p-4 text-sm text-amber-700",children:f}),m&&(0,a.jsx)("div",{className:"mb-4 rounded-md border border-emerald-200 bg-emerald-50 p-4 text-sm text-emerald-700",children:m}),!s&&(0,a.jsxs)("form",{onSubmit:K,className:"grid gap-6 lg:grid-cols-[2fr_1fr]",children:[(0,a.jsxs)("div",{className:"space-y-4 rounded-xl border border-gray-200 bg-white p-6 shadow-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-sm font-medium",children:"N\xe1zev produktu"}),(0,a.jsx)("input",{type:"text",name:"name",value:P.name,onChange:V,required:!0,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-sm font-medium",children:"Popis"}),(0,a.jsx)("textarea",{name:"description",value:P.description,onChange:V,rows:6,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm"}),(0,a.jsxs)("div",{className:"mt-3 flex flex-wrap gap-2",children:[(0,a.jsx)("button",{type:"button",onClick:X,disabled:g,className:"inline-flex items-center gap-2 rounded-md border border-gray-300 px-3 py-2 text-xs font-semibold text-gray-700 hover:bg-gray-100 disabled:opacity-60",children:g?"Generuji...":"Vygenerovat popis z obr\xe1zku (AI)"}),(0,a.jsx)("button",{type:"button",onClick:Y,disabled:v,className:"inline-flex items-center gap-2 rounded-md border border-gray-300 px-3 py-2 text-xs font-semibold text-gray-700 hover:bg-gray-100 disabled:opacity-60",children:v?"Generuji...":"Vytvořit produkt pomoc\xed AI"}),(0,a.jsx)("button",{type:"button",onClick:ea,disabled:j,className:"inline-flex items-center gap-2 rounded-md border border-gray-300 px-3 py-2 text-xs font-semibold text-gray-700 hover:bg-gray-100 disabled:opacity-60",children:j?"Generuji...":"Přepsat popis (AI)"}),(0,a.jsx)("button",{type:"button",onClick:en,disabled:k,className:"inline-flex items-center gap-2 rounded-md border border-gray-300 px-3 py-2 text-xs font-semibold text-gray-700 hover:bg-gray-100 disabled:opacity-60",children:k?"Generuji...":"Zkr\xe1tit popis"}),(0,a.jsx)("button",{type:"button",onClick:ei,disabled:_,className:"inline-flex items-center gap-2 rounded-md border border-gray-300 px-3 py-2 text-xs font-semibold text-gray-700 hover:bg-gray-100 disabled:opacity-60",children:_?"Generuji...":"Vylepšit marketingov\xfd t\xf3n"}),(0,a.jsx)("button",{type:"button",onClick:eo,disabled:E,className:"inline-flex items-center gap-2 rounded-md border border-gray-300 px-3 py-2 text-xs font-semibold text-gray-700 hover:bg-gray-100 disabled:opacity-60",children:E?"Generuji...":"Vygenerovat body v\xfdhod"})]})]}),(0,a.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-sm font-medium",children:"Cena (Kč)"}),(0,a.jsx)("input",{type:"number",name:"price_czk",value:P.price_czk,onChange:V,step:"0.01",required:!0,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm"}),(0,a.jsx)("button",{type:"button",onClick:es,disabled:C,className:"mt-2 inline-flex items-center gap-2 rounded-md border border-gray-300 px-3 py-2 text-xs font-semibold text-gray-700 hover:bg-gray-100 disabled:opacity-60",children:C?"Generuji...":"Navrhnout lepš\xed cenu"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-sm font-medium",children:"Počet kusů (stock)"}),(0,a.jsx)("input",{type:"number",name:"stock",value:P.stock,onChange:V,required:!0,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-sm font-medium",children:"Obvod / velikost produktu"}),(0,a.jsx)("input",{type:"text",name:"wrist_size",value:P.wrist_size,onChange:V,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm",placeholder:"Např. 16 cm nebo 15-17 cm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-sm font-medium",children:"Kategorie"}),(0,a.jsxs)("select",{name:"category_id",value:P.category_id,onChange:V,required:!0,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm",children:[(0,a.jsx)("option",{value:"",children:"-- Vyber kategorii --"}),F.map(e=>(0,a.jsx)("option",{value:String(e.id),children:e.label},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-sm font-medium",children:"Varianty"}),(0,a.jsxs)("div",{className:"space-y-3",children:[I.map((e,t)=>{var r,n;return(0,a.jsxs)("div",{className:"rounded-lg border border-gray-200 p-4",children:[(0,a.jsxs)("div",{className:"grid gap-3 md:grid-cols-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-500",children:"N\xe1zev varianty"}),(0,a.jsx)("input",{type:"text",value:e.variant_name||"",onChange:e=>q(t,{variant_name:e.target.value}),className:"w-full rounded-md border border-gray-300 px-2 py-1 text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-500",children:"Obvod / velikost"}),(0,a.jsx)("input",{type:"text",value:e.wrist_size||"",onChange:e=>q(t,{wrist_size:e.target.value}),className:"w-full rounded-md border border-gray-300 px-2 py-1 text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-500",children:"Cena varianty"}),(0,a.jsx)("input",{type:"number",step:"0.01",value:null!==(r=e.price_czk)&&void 0!==r?r:"",onChange:e=>q(t,{price_czk:e.target.value?Number(e.target.value):null}),className:"w-full rounded-md border border-gray-300 px-2 py-1 text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-500",children:"Sklad varianty"}),(0,a.jsx)("input",{type:"number",value:null!==(n=e.stock)&&void 0!==n?n:0,onChange:e=>q(t,{stock:Number(e.target.value)}),className:"w-full rounded-md border border-gray-300 px-2 py-1 text-sm"})]}),(0,a.jsxs)("div",{className:"md:col-span-2",children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-500",children:"Popis varianty"}),(0,a.jsx)("textarea",{value:e.description||"",onChange:e=>q(t,{description:e.target.value}),rows:2,className:"w-full rounded-md border border-gray-300 px-2 py-1 text-sm"})]})]}),(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-500",children:"Obr\xe1zek varianty"}),(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var r;return q(t,{imageFile:(null===(r=e.target.files)||void 0===r?void 0:r[0])||null})}})]}),(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("label",{className:"mb-1 block text-xs font-semibold uppercase text-gray-500",children:"Dalš\xed fotky varianty"}),(0,a.jsx)("input",{type:"file",multiple:!0,accept:"image/*",onChange:e=>q(t,{extraFiles:Array.from(e.target.files||[])})})]}),(0,a.jsx)("div",{className:"mt-3 text-right",children:(0,a.jsx)("button",{type:"button",onClick:()=>B(t),className:"rounded-md border border-red-200 px-3 py-1 text-xs text-red-700",children:"Odstranit variantu"})})]},t)}),(0,a.jsx)("button",{type:"button",onClick:()=>{L(e=>[...e,{variant_name:"",wrist_size:"",description:"",price_czk:null,stock:0,image:null,image_url:null,media:[],imageFile:null,extraFiles:[]}])},className:"rounded-md border border-gray-300 px-3 py-2 text-xs font-semibold text-gray-700",children:"+ Přidat variantu"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white p-5 shadow-sm",children:[(0,a.jsx)("label",{className:"mb-2 block text-sm font-medium",children:"\xdavodn\xed obr\xe1zek"}),(0,a.jsx)("input",{type:"file",name:"image",accept:"image/*",onChange:e=>{var t;let r=(null===(t=e.target.files)||void 0===t?void 0:t[0])||null;A(e=>({...e,image:r}))},className:"w-full text-sm"}),U&&(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("div",{className:"h-28 w-28 overflow-hidden rounded-lg border border-gray-200 shadow",children:(0,a.jsx)("img",{src:U,alt:"preview",className:"h-full w-full object-cover"})}),(0,a.jsx)("p",{className:"mt-2 text-xs text-gray-500",children:"N\xe1hled hlavn\xedho obr\xe1zku."})]}),(0,a.jsx)("p",{className:"mt-3 text-xs text-gray-500",children:"Upload: /static/uploads/"})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white p-5 shadow-sm",children:[(0,a.jsx)("label",{className:"mb-2 block text-sm font-medium",children:"Dalš\xed obr\xe1zky nebo videa"}),(0,a.jsx)("input",{type:"file",name:"media",accept:"image/*,video/*",multiple:!0,onChange:e=>{R(Array.from(e.target.files||[]))},className:"w-full text-sm"}),D.length>0&&(0,a.jsx)("div",{className:"mt-4 grid grid-cols-3 gap-2",children:D.map((e,t)=>(0,a.jsx)("div",{className:"h-20 w-20 overflow-hidden rounded-lg bg-gray-100",children:e.type.startsWith("video")?(0,a.jsx)("video",{src:e.url,className:"h-full w-full object-cover",muted:!0}):(0,a.jsx)("img",{src:e.url,alt:"media",className:"h-full w-full object-cover"})},t))})]}),(0,a.jsxs)("div",{className:"rounded-xl border border-gray-200 bg-white p-5 shadow-sm",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-700",children:"Akce"}),(0,a.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Zkontrolujte data, pot\xe9 potvrďte vytvořen\xed produktu."}),(0,a.jsxs)("div",{className:"mt-4 flex flex-col gap-2",children:[(0,a.jsx)("button",{type:"submit",disabled:c,className:"rounded-md bg-gray-900 px-4 py-2 text-sm font-semibold text-white hover:bg-gray-800 disabled:opacity-60",children:c?"Ukl\xe1d\xe1m...":"Uložit"}),(0,a.jsx)("button",{type:"button",onClick:()=>e.push("/admin/products"),className:"rounded-md border border-gray-300 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Zpět"})]})]})]})]})]})})}},6264:function(e,t,r){"use strict";r.d(t,{$Y:function(){return S},Bd:function(){return C},Dj:function(){return b},Hy:function(){return _},Ir:function(){return g},MX:function(){return s},QX:function(){return z},RA:function(){return y},SN:function(){return E},TE:function(){return f},c0:function(){return k},cQ:function(){return N},cW:function(){return j},f8:function(){return i},gF:function(){return w},h6:function(){return x},jn:function(){return l},k4:function(){return d},nM:function(){return h},pE:function(){return c},ry:function(){return m},t2:function(){return o},uu:function(){return p},yr:function(){return u},zm:function(){return v}});let a="/api",n=a.includes("backend")?"/api":a;function i(e){let t=e.startsWith("/")?e:"/".concat(e);return"/api"===n?t.startsWith("/api/")||"/api"===t?t:"/api".concat(t):"".concat(n).concat(t)}async function o(){let e=await fetch(i("/api/products/"),{cache:"no-store"});if(!e.ok)throw Error("Nepodařilo se nač\xedst produkty (".concat(e.status,")"));return await e.json()}async function s(e){let t=await fetch(i("/api/products/".concat(e)),{cache:"no-store"});if(!t.ok)throw Error("Nepodařilo se nač\xedst produkt (".concat(t.status,")"));return await t.json()}async function l(e){let t=await fetch(i("/api/categories/".concat(e)),{cache:"no-store"});if(!t.ok)throw Error("Nepodařilo se nač\xedst kategorii (".concat(t.status,")"));return await t.json()}async function c(){let e=await fetch(i("/api/categories/"),{cache:"no-store"});if(!e.ok)throw Error("Nepodařilo se nač\xedst kategorie (".concat(e.status,")"));return await e.json()}async function d(e){let t=await fetch(i("/api/categories/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e="Nepodařilo se vytvořit kategorii (".concat(t.status,")");try{let r=await t.json();e=(null==r?void 0:r.error)||(null==r?void 0:r.message)||(null==r?void 0:r.detail)||e}catch(e){}throw Error(e)}return await t.json()}async function u(e,t){let r=await fetch(i("/api/categories/".concat(e)),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok){let e="Nepodařilo se uložit kategorii (".concat(r.status,")");try{let t=await r.json();e=(null==t?void 0:t.error)||(null==t?void 0:t.message)||(null==t?void 0:t.detail)||e}catch(e){}throw Error(e)}return await r.json()}async function p(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=await fetch(i(t?"/api/categories/".concat(e,"?force=true"):"/api/categories/".concat(e)),{method:"DELETE"});if(!r.ok){let e="Nepodařilo se smazat kategorii (".concat(r.status,")");try{let t=await r.json();e=(null==t?void 0:t.error)||(null==t?void 0:t.message)||(null==t?void 0:t.detail)||e}catch(e){}throw Error(e)}}async function m(e){let t=await fetch(i("/api/products/"),{method:"POST",body:e});if(!t.ok){let e="Nepodařilo se vytvořit produkt (".concat(t.status,")");try{let r=await t.json();e=(null==r?void 0:r.error)||(null==r?void 0:r.message)||(null==r?void 0:r.detail)||e}catch(e){}throw Error(e)}return await t.json()}async function h(e,t){let r=await fetch(i("/api/products/".concat(e)),{method:"PUT",body:t});if(!r.ok){let e="Nepodařilo se uložit produkt (".concat(r.status,")");try{let t=await r.json();e=(null==t?void 0:t.error)||(null==t?void 0:t.message)||(null==t?void 0:t.detail)||e}catch(e){}throw Error(e)}return await r.json()}async function g(e){let t=await fetch(i("/api/products/".concat(e)),{method:"DELETE"});if(!t.ok){let e="Nepodařilo se smazat produkt (".concat(t.status,")");try{let r=await t.json();e=(null==r?void 0:r.error)||(null==r?void 0:r.message)||(null==r?void 0:r.detail)||e}catch(e){}throw Error(e)}}async function y(e){let t=await fetch(i("/api/ai/vision/analyze"),{method:"POST",body:e});if(!t.ok){let e="Anal\xfdza obr\xe1zku selhala (".concat(t.status,")");try{let r=await t.json();e=(null==r?void 0:r.error)||(null==r?void 0:r.message)||(null==r?void 0:r.detail)||e}catch(e){}throw Error(e)}return await t.json()}async function f(e){let t=await fetch(i("/api/ai/deepseek/generate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({context:e})});if(!t.ok){let e="Generov\xe1n\xed popisu selhalo (".concat(t.status,")");try{let r=await t.json();e=(null==r?void 0:r.error)||(null==r?void 0:r.message)||(null==r?void 0:r.detail)||e}catch(e){}throw Error(e)}return await t.json()}async function b(e){await fetch(i("/api/ai/rag/ingest"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}async function v(e){let t=await fetch(i("/api/ai/rag/search"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e="Vyhled\xe1v\xe1n\xed v RAG selhalo (".concat(t.status,")");try{let r=await t.json();e=(null==r?void 0:r.error)||(null==r?void 0:r.message)||(null==r?void 0:r.detail)||e}catch(e){}throw Error(e)}return t.json()}async function x(e){let t=await fetch(i("/api/media/".concat(e)),{method:"DELETE"});if(!t.ok){let e="Smaz\xe1n\xed m\xe9dia selhalo (".concat(t.status,")");try{let r=await t.json();e=(null==r?void 0:r.error)||(null==r?void 0:r.message)||(null==r?void 0:r.detail)||e}catch(e){}throw Error(e)}}async function j(e){let t=await fetch(i("/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e="Přihl\xe1šen\xed selhalo (".concat(t.status,")");try{let r=await t.json();e=(null==r?void 0:r.error)||(null==r?void 0:r.message)||(null==r?void 0:r.detail)||e}catch(e){}throw Error(e)}}async function w(e){let t=await fetch(i("/api/auth/forgot"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e="Odesl\xe1n\xed odkazu selhalo (".concat(t.status,")");try{let r=await t.json();e=(null==r?void 0:r.error)||(null==r?void 0:r.message)||(null==r?void 0:r.detail)||e}catch(e){}throw Error(e)}}async function k(e){let t=await fetch(i("/api/auth/reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e="Reset hesla selhal (".concat(t.status,")");try{let r=await t.json();e=(null==r?void 0:r.error)||(null==r?void 0:r.message)||(null==r?void 0:r.detail)||e}catch(e){}throw Error(e)}}async function N(e){var t,r,a,n;let o=new URLSearchParams;e.vs&&o.set("vs",e.vs),e.status&&"all"!==e.status&&o.set("status",e.status),e.limit&&o.set("per_page",String(e.limit));let s=await fetch(i("/api/payments?".concat(o.toString())),{cache:"no-store"});if(!s.ok)throw Error("Nepodařilo se nač\xedst platby (".concat(s.status,")"));let l=await s.json();return{items:(null==l?void 0:l.items)||(null==l?void 0:l.rows)||(null==l?void 0:l.data)||[],total:null!==(r=null!==(t=null==l?void 0:l.total)&&void 0!==t?t:null==l?void 0:l.count)&&void 0!==r?r:null,page:null!==(a=null==l?void 0:l.page)&&void 0!==a?a:null,per_page:null!==(n=null==l?void 0:l.per_page)&&void 0!==n?n:null}}async function _(){var e,t,r;let a=await fetch(i("/api/payments/summary"),{cache:"no-store"});if(!a.ok)return null;let n=await a.json();return{count:null!==(e=null==n?void 0:n.count)&&void 0!==e?e:null,total_amount:null!==(r=null!==(t=null==n?void 0:n.total_amount)&&void 0!==t?t:null==n?void 0:n.totalAmount)&&void 0!==r?r:null}}async function S(e){let t=new URLSearchParams;Object.entries(e).forEach(e=>{let[r,a]=e;a&&t.set(r,a)});let r=await fetch(i("/api/sold?".concat(t.toString())),{cache:"no-store"});if(!r.ok)throw Error("Nepodařilo se nač\xedst prodan\xe9 (".concat(r.status,")"));let a=await r.json();return{rows:(null==a?void 0:a.rows)||(null==a?void 0:a.items)||(null==a?void 0:a.data)||[],summary:(null==a?void 0:a.summary)||null}}function E(e,t){let r=new URLSearchParams;return Object.entries(t).forEach(e=>{let[t,a]=e;a&&r.set(t,a)}),i("/api/sold/export/".concat(e,"?").concat(r.toString()))}function z(e){return i("/api/sold/".concat(e,"/invoice-preview"))}async function C(e){let t=await fetch(i("/api/sold/".concat(e,"/invoice-send")),{method:"POST"});if(!t.ok){let e="Odesl\xe1n\xed faktury selhalo (".concat(t.status,")");try{let r=await t.json();e=(null==r?void 0:r.error)||(null==r?void 0:r.message)||(null==r?void 0:r.detail)||e}catch(e){}throw Error(e)}}},6463:function(e,t,r){"use strict";var a=r(1169);r.o(a,"useParams")&&r.d(t,{useParams:function(){return a.useParams}}),r.o(a,"usePathname")&&r.d(t,{usePathname:function(){return a.usePathname}}),r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}}),r.o(a,"useSearchParams")&&r.d(t,{useSearchParams:function(){return a.useSearchParams}})}},function(e){e.O(0,[971,23,744],function(){return e(e.s=8065)}),_N_E=e.O()}]);